/*/assets/lib/javascripts/ajaxhandler.js*/
var _AJAX_HANDLER_VERSIONS_=[1,2];var _AJAX_LOADER_VERSIONS_=[1,2];var _ALLOWED_HANDLER_OPTIONS_={"2":["version","ajaxLoaderVersion","dataType","onBeforeSubmit","onBeforeSend","onSuccess","onError","onComplete"]};window.multipleAjaxEnabled=false;$.fn.attachAjaxEventToForm=function(){$(this).ajaxSend(function(c,b,a){if(a.type==="POST"&&window.multipleAjaxEnabled===false){$(this).data("submitted",true);}}).ajaxComplete(function(c,b,a){if(a.type==="POST"&&window.multipleAjaxEnabled===false){$(this).removeData("submitted",true);}}).ajaxError(function(d,c,a){if(a.type==="POST"&&false!=c.show_flash){var b=ajaxResponseHandlers.defhandler.parse(c.responseText);jQuery.each(b.errors,function(f,e){if(!e.hasOwnProperty("param")){flashMessage.show(flashMessage.getAsFlash("error",e.message));}});}});};$(document).ready(function(){$("form").each(function(){$(this).attachAjaxEventToForm();});});(function(e){e.fn.ajaxhandler=function(f){var g;if(_.isString(f)){g=c(ajaxResponseHandlers[f]);}else{g=c(f);}if(e(this).is("form")){b(e(this),g);}else{a(e(this),g);}return this;};var c=function(g){g=g||{};var i=1;if(_.has(g,"version")){i=g.version;if(_.isNaN(i)||_.indexOf(_AJAX_HANDLER_VERSIONS_,i,true)===-1){throw new Error("Invalid handler version : "+i);}}d(i,g);if(i===1){if(_.isFunction(g.beforeSubmit)){throw new Error("beforeSubmit callback cannot be overridden");}}var h=null;if(i===1){h=ajaxResponseHandlers.defhandler;}else{if(i===2){h=ajaxResponseHandlers.defhandlerv2;}}var f=jQuery.extend(true,{},h);jQuery.extend(f,g);return f;};var d=function(f,j){var h=_ALLOWED_HANDLER_OPTIONS_[f];if(_.isUndefined(h)||"GET"===j.type){return;}var i=_.keys(j);for(var g in i){if(_.indexOf(h,i[g])===-1){throw new Error("Option "+i[g]+" is not allowed.");}}};var a=function(g,f){if(g.attr("post")==="true"){f.type="POST";f.data={_csrf_token:e("meta[name=csrf-token]").attr("content")};f._form_=g;}e.ajax(g.attr("href"),f);};var b=function(g,f){f._form_=g;f.contentType="application/x-www-form-urlencoded; charset=UTF-8";g.ajaxSubmit(f);};})(jQuery);var toastMessage={timeoutID:null,show:function(c){var a=this.add();var b=a.find('[data-cb-status-content="true"]');if(c!=null&&typeof c.type!==undefined){if(c.type=="persist_notice"){c.type="notice";b.attr("data-cb-flash-persist","true");}b.text(c.message);flashMessage.handleToastIcon(a,c);ajaxLoading.hide();$(a).css({display:"inline-block"});$(a).animate({opacity:1},200);flashMessage.timeoutID=setTimeout(function(){$(a).animate({opacity:0},200,function(){$(a).css({display:"none"});});},5000);}},add:function(){var a=$("#cb-status-toasts").find('[data-cb-status="true"]');if(a.size()===0){a=$('<div class="cn-toast" data-cb-status="true"><div class="cn-toast__container"><div class="cn-toast__main"><div class="cn-toast__icon" data-toast-icon="true"></div><div class="cn-toast__content" data-cb-status-content="true"></div></div></div></div>');$("#cb-status-toasts").append(a);}return a;},handleToastIcon:function(b,c){var a="";if(c.type==="error"){a="cn-toast__icon--danger";}else{if(c.type==="notice"){a="cn-toast__icon--success";}}$(b).find('[data-toast-icon="true"]').each(function(d,f){f.className="cn-toast__icon";});$(b).find('[data-toast-icon="true"]').addClass(a);},append:function(a){return void 0;},hide:function(a){clearTimeout(flashMessage.timeoutID);$('#cb-status-toasts [data-cb-status="true"]').animate({opacity:0},0,function(){$('#cb-status-toasts [data-cb-status="true"]').css({display:"none"});});}};var flashMessage={getAsFlash:function(b,c){var a=new Object();a.type=b;a.message=c;return a;},get:function(a){if(typeof a==="undefined"||a==null){return null;}if((typeof a)!=="object"){a=jQuery.parseJSON(a);}if(a.hasOwnProperty("NOTICE")){return flashMessage.getAsFlash("notice",a.NOTICE);}else{if(a.hasOwnProperty("ERROR")){return flashMessage.getAsFlash("error",a.ERROR);}else{if(a.hasOwnProperty("PERSIST_NOTICE")){return flashMessage.getAsFlash("persist_notice",a.PERSIST_NOTICE);}}}return null;},show:function(b){var a=$(".cb-status-flash").css("display","block").find("p");if(b!=null&&typeof b.type!==undefined){if(b.type=="persist_notice"){b.type="notice";a.attr("data-cb-flash-persist","true");}a.attr("class",b.type).text(b.message);$(".cb-status-flash").trigger("flash:visible");}},append:function(a){$(".cb-status-flash").css("display","block").find("p").append(a);},hide:function(a){$(".cb-status-flash").hide();}};var ajaxProgress={show:function(a){var c=$(a).attr("data-loading-text");if(!c){c="Loading...";}$("#cn-toast-progress").find(".cn-progress__content").text(c);$("#cn-toast-progress").show();var b=$(".cn-toast").find('p[data-cb-flash-persist="true"]');if(typeof b==="undefined"||b.length===0){flashMessage.hide();}},hide:function(){$("#cn-toast-progress").hide();}};var ajaxLoading={show:function(){$(".cb-loading").show();var a=$(".cb-status-flash").find('p[data-cb-flash-persist="true"]');if(typeof a==="undefined"||a.length===0){flashMessage.hide();}},hide:function(){$(".cb-loading").hide();}};var ajaxLoadingV2={show:function(a){a.find(":submit").addClass("cb-btn-spinner");},hide:function(){$(".cb-btn-spinner").removeClass("cb-btn-spinner");}};var ajaxResponseHandlers={defhandler:{beforeSend:function(c,b){if(_.isUndefined(c._form_)){c._form_=b._form_;}var a=1;if(_.has(b,"ajaxLoaderVersion")){c.ajaxLoaderVersion=b.ajaxLoaderVersion;a=b.ajaxLoaderVersion;}if(a===2){ajaxLoadingV2.show(c._form_);}else{ajaxLoading.show(c._form_);}},beforeSubmit:function(a,b,d){var c=b.find('[data-cb-select="multiselect"]');if(c.length===0){return true;}try{a=b.cbFormatMultiSelectParamArr(a);}catch(f){return false;}},success:function(b,c,d,a){if(b.reload){window.location.href=window.location.href;}else{window.location.replace(b.forward);}},error:function(b,d,c){var a=ajaxResponseHandlers.defhandler.parse(b.responseText);jQuery.each(a.errors,function(f,e){if(typeof e.param=="undefined"||e.param!=null){flashMessage.show(flashMessage.getAsFlash("error",e.message));}});},complete:function(b,c){var a=1;if(_.has(b,"ajaxLoaderVersion")){a=b.ajaxLoaderVersion;}if(a===2){ajaxLoadingV2.hide();}else{ajaxLoading.hide();}},parse:function(a){if(typeof a!="object"){return jQuery.parseJSON(a);}return a;}},defhandlerv2:{beforeSend:function(b,a){this.onBeforeSend(b,a);},beforeSubmit:function(a,b,c){this.onBeforeSubmit(a,b,c);},success:function(b,c,d,a){this.onSuccess(b,c,d,a);},error:function(b,d,c){var a=this.parse(b.responseText);if(b.status===401&&_.has(a,"error_info")){if(_.has(a.error_info,"reason")){alert(a.error_info.reason);}if(_.has(a.error_info,"redirect_url")){window.top.location.replace(a.error_info.redirect_url);}}this.onError(b,d,c);},complete:function(a,b){this.onComplete(a,b);},parse:function(a){return ajaxResponseHandlers.defhandler.parse(a);},onBeforeSubmit:function(a,b,c){ajaxResponseHandlers.defhandler.beforeSubmit(a,b,c);},onBeforeSend:function(b,a){ajaxResponseHandlers.defhandler.beforeSend(b,a);},onSuccess:function(b,c,d,a){ajaxResponseHandlers.defhandler.success(b,c,d,a);},onError:function(a,c,b){ajaxResponseHandlers.defhandler.error(a,c,b);},onComplete:function(a,b){ajaxResponseHandlers.defhandler.complete(a,b);}}};(function(){$.fn.cbFormatMultiSelectParamArr=function(l){var m=$(this).find('[data-cb-select="multiselect"]');var a=[],q=[],p=[];for(var h=0;h<m.length;h++){var b=$(m[h]);var e=b.attr("name");var r=b.select2("val");if(b.attr("type")!=="hidden"||_.isUndefined(e)||!_.isArray(r)){continue;}for(var g=0;g<r.length;g++){var c={name:e,type:"hidden",value:r[g]};p.push(c);}a.push({name:e,value:r});}for(var f=0;f<a.length;f++){for(var h in l){if(l[h]["name"]===a[f]["name"]){q.push(h);break;}}}for(var h=0;h<q.length;h++){l[q[h]]=p[h];}for(var h=q.length;h<p.length;h++){l.push(p[h]);}return l;};$.fn.cbSerialize=function(){var a=$(this).find('[data-cb-select="multiselect"]');if(a.length===0){return $(this).serialize();}return $.param($(this).cbFormatMultiSelectParamArr($(this).formToArray()),true);};})();
/*/assets/lib/javascripts/jquery-utils.js*/
function $esc(a){return a.replace(/(:|\.)/g,"\\$1");}function jq(a){return"#"+a.replace(/(:|\[|\]|\.)/g,"\\$1");}function isCheckable(a){return(a.is("input[type=radio]")||a.is("input[type=checkbox]"));}function flashFadeOut(a){if(a){a.delay(5000).fadeOut(2500);}}function retainSwitchState(b,c){var a=$(b.target).is(":checked");if(a){c.reject();}else{c.resolve();}}function toggleSwitchState(b){var a=$(b).is(":checked");if(a){$(b).removeAttr("checked");}else{$(b).attr("checked","checked");}}(function(a){jQuery.fn.extend({insertAtCaret:function(b){return this.each(function(e){if(document.selection){this.focus();sel=document.selection.createRange();sel.text=b;this.focus();}else{if(this.selectionStart||this.selectionStart=="0"){var d=this.selectionStart;var c=this.selectionEnd;var f=this.scrollTop;this.value=this.value.substring(0,d)+b+this.value.substring(c,this.value.length);this.focus();this.selectionStart=d+b.length;this.selectionEnd=d+b.length;this.scrollTop=f;}else{this.value+=b;this.focus();}}});},selectOnClick:function(){return this.each(function(b){a(this).click(function(g){if(typeof window.getSelection!="undefined"&&typeof document.createRange!="undefined"){var c=document.createRange();c.selectNodeContents(this);var f=window.getSelection();f.removeAllRanges();f.addRange(c);}else{if(typeof document.selection!="undefined"&&typeof document.body.createTextRange!="undefined"){var d=document.body.createTextRange();d.moveToElementText(this);d.select();}}});});}});})(jQuery);
/*/assets/lib/javascripts/form-utils.js*/
if(!String.prototype.codify){String.prototype.codify=function(){var a=this;a=a.replace(new RegExp("\\s","g"),"");return a;};}if(!String.prototype.underscorify){String.prototype.underscorify=function(){var a=this;a=a.replace(new RegExp("\\s","g"),"_");return a;};}if(!String.prototype.hyphenify){String.prototype.hyphenify=function(){var a=this;a=a.replace(new RegExp("\\s","g"),"-");return a;};}if(!String.prototype.startsWith){String.prototype.startsWith=function(a){var b=this;if(a===""){return true;}if(b==null||a==null){return false;}b=String(b);a=String(a);return b.length>=a.length&&b.slice(0,a.length)===a;};}(function(b){var a={autoSelect:function(c){var g=b(this);var f=b(c.target);if(!g.is("input")||!f.is("input")||!isCheckable(f)){return b(this);}var d=function(h){b.each(f,function(){if(c.expected==b(this).val()){b(this).addClass(c.className);}});};if(isCheckable(g)){g.change(d);return b(this);}g.bind("keydown",d);if(c.autoclear){f.formutils("autoClear",{changed:c.expected,target:g});}return b(this);},autoClear:function(c){var g=b(this);var f=b(c.target);if(!g.is("input")||!f.is("input")){return b(this);}var d=function(){if(c.changed!=b(this).val()){f.val("");formValidation.errorHandler.remove(f,{name:f.attr("name")});}};if(isCheckable(g)){g.bind("change",d);return b(this);}return b(this);},autoEnable:function(f){var i={basedon:b(this),autofocus:true,negate:false};var c=b.extend({},i,f);var h=b(this);var g=b(c.target);if(!h.is("input")||!g.is("input")){return b(this);}var d=function(){var j=c.basedon;if(j.is(":checked")){g.removeAttr("disabled");if(c.autofocus!=false){g.focus();}}else{g.attr("disabled","disabled");}};if(isCheckable(h)){h.change(d);return;}return b(this);},autoFill:function(d){var e={placeholder:true,codify:false,underscorify:false,hyphenify:false,codeUpperCase:false};var c=b.extend({},e,d);if(c.target==undefined){return b(this);}b(this).keyup(function(){var f=b(this).val();if(c.codify){f=c.codeUpperCase?f.toUpperCase():f.toLowerCase();f=f.codify();}else{if(c.underscorify){f=c.codeUpperCase?f.toUpperCase():f.toLowerCase();f=f.underscorify();}else{if(c.hyphenify){f=c.codeUpperCase?f.toUpperCase():f.toLowerCase();f=f.hyphenify();}}}if(c.placeholder){c.target.attr("placeholder",f);}else{c.target.val(f);}});return b(this);}};b.fn.formutils=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1));}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments);}else{b.error("Method "+c+" does not exist on jQuery.formutils");}}};})(jQuery);
/*/assets/lib/javascripts/form-validation.js*/
(function(c){c.fn.validate=function(){return this.filter("form[validate]").each(function(){var e=c(this);var d=window[e.attr("id")];e.submit(function(){try{if(c.fn.validate.isValid(e,d.validators,d)){return(e.attr("ajax")=="false");}else{return false;}}catch(g){alert(g);if(console&&console.log){console.log(g,g.stack);}return false;}}).bind("form:validate:fail",function(g){formValidation.callbacks.form.fail(e,g);}).bind("form:validate:pass",function(g){formValidation.callbacks.form.pass(e,g);}).bind("form:validate:clear",function(g){formValidation.callbacks.form.clear(e,g);});var f=e.find("[validate]").live("element:validate:fail",function(i,h){var g=c(this);formValidation.callbacks.element.fail(g,h,function(){formValidation.errorHandler.add(g,h);},i);}).live("element:validate:loading",function(h){var g=c(this);formValidation.callbacks.element.loading(g,function(){formValidation.errorHandler.remove(g);formValidation.errorHandler.loading(g);},h);}).live("element:validate:pass",function(h){var g=c(this);formValidation.callbacks.element.pass(g,function(){formValidation.errorHandler.remove(g);},h);}).live("element:validate:clear",function(h){var g=c(this);formValidation.errorHandler.clear(g);});if(d.strategy=="onfocusout"){f.live("focusout",function(){c.fn.validate.isValid(c(this),d.validators,d);});}});};c.fn.validate.isValid=function(g,d,f){if(g.is("form")){return b(g,d,f);}else{var e=g.attr("v_name");if(e==null){e=g.attr("name");}return a(g,d[e],f);}};var b=function(g,d,e){flashMessage.hide();var f=true;g.find("[validate]").each(function(){if(!c.fn.validate.isValid(c(this),d,e)){f=false;}});if(f){g.trigger("form:validate:pass");}else{g.trigger("form:validate:fail");}return f;};var a=function(i,h,g){var e=true;if(typeof h=="undefined"){return e;}if(i.hasClass("placeholder")&&i.val()==i.attr("placeholder")){i.val("");}if(h.depends_on){var n=h.depends_on;var m=h.depends_val;var k="";if(c(jq(n)).is("select")){k=c("select[name='"+$esc(n)+"']");}else{k=c("input[name='"+$esc(n)+"']");}var j="";if(isCheckable(k)){j=c("input[name='"+$esc(n)+"']:checked").val();}else{j=k.val();}if(m!=j){return true;}if(h.allow_blank===true){h.allow_blank=false;}}if(h.allow_blank&&i.val()===""){i.trigger("element:validate:pass");if(g.stripEmptyParams){i.attr("disabled","disabled");}return true;}for(var f in h){if(formValidation.validators.local[f]&&(message=formValidation.validators.local[f](i,h[f]))){if(h.common_message){message=h.common_message;}i.trigger("element:validate:fail",message);e=false;break;}}if(e){i.trigger("element:validate:pass");}if(e&&g.strategy=="onfocusout"){for(var d in h){if(formValidation.validators.remote[d]){i.trigger("element:validate:loading");formValidation.validators.remote[d](i,h[d]);break;}}}return e;};c(document).ready(function(){c("form[validate]").validate();});})(jQuery);var formValidation={callbacks:{element:{fail:function(b,d,a,c){a();},loading:function(b,a,c){a();},pass:function(a,b,c){b();}},form:{fail:function(b,a){flashMessage.show({type:"error",message:getTranslatedMessage("submit_error","There were errors while submitting")});},pass:function(d,c){if(d.data("submitted")===true){c.preventDefault();return;}if(d.attr("ajax")=="false"){return;}var a=d.attr("ajaxevent");if(typeof a=="undefined"){a="formhandler";}var f=undefined;if(d.data("after-validation")){var b=window[d.data("after-validation")];if(b){f=b(d,a);}}if(f&&$.isFunction(f.done)){var e=this;d.data("submitted","true");f.done(function(g){d.data("submitted","false");if(!g){e._pass(d,c,a);}});}else{this._pass(d,c,a);}},clear:function(b,a){b.find("[validate]").each(function(){$(this).trigger("element:validate:clear");});flashMessage.hide();},_pass:function(c,b,a){c.ajaxhandler(a);}}},errorHandler:{add:function(e,j,f){var c=$(jq(e.attr("name")+".status"));c.show().removeClass("loading success").addClass("error");if(typeof f!=="undefined"){var h=$(jq(e.attr("name")+"_probableReason"));h.css("display","inline-block");h.html(f);}var b=$(jq(e.attr("name")+".err"));if(b.length>0){b.css("display","inline-block");b.html(j);var g=$('span[id$=".err"]:above-the-top');var a=false;for(var d=0;d<g.length;d++){if(!a&&$(g[d]).text()!==""&&$(window).scrollTop()>($(g[d]).offset().top)){$("html, body").animate({scrollTop:$(g[d]).offset().top-40},0);a=true;}}}else{flashMessage.append(j);}},loading:function(a){var b=$(jq(a.attr("name")+".status"));b.show().removeClass("success error").addClass("loading");},remove:function(a){var d=$(jq(a.attr("name")+".status"));d.show().removeClass("loading error").addClass("success");var c=$(jq(a.attr("name")+".err"));if($.trim(c.text())!==""){c.empty().hide();}var b=$(jq(a.attr("name")+"_probableReason"));if($.trim(b.text())!==""){b.empty().css("display","inline-block");}},clear:function(a){var d=$(jq(a.attr("name")+".status"));d.removeClass("loading error success");var b=$(jq(a.attr("name")+".err"));b.empty().css("display","inline-block");var c=$(jq(a.attr("name")+"_probableReason"));c.empty().css("display","inline-block");}},validators:{all:function(){return jQuery.extend({},formValidation.validators.local,formValidation.validators.remote);},local:{presence:function(b,a){if(/^\s*$/.test(b.val()||"")){return a.message;}},depends:function(c,b){var a=$("input:radio[name="+b.depends_on+"]:checked").val();if(a=="true"){return;}else{return b.message;}},format:function(b,a){if(a["with"]){var c=new RegExp(a["with"],a.modifiers);if(!c.test(b.val())){return a.message;}}},alpha:function(b,a){if(!(/^[A-Za-z]+$/.test(this.value))){return a.message;}},alphaNumeric:function(b,a){if(!(/^[0-9A-Za-z]+$/.test(this.value))){return a.message;}},numeric:function(b,a){if(!/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d*)?$/.test(b.val())){return a.message;}},strictInt:function(b,a){if(!/^\d+$/.test(b.val())){return a.message;}},range:function(b,a){if(a.minimum&&parseFloat(b.val())<a.minimum){return a.message;}if(a.maximum&&parseFloat(b.val())>a.maximum){return a.message;}},length:function(b,a){if(a.is&&b.val().length!=a.is){return a.message;}if(a.minimum&&b.val().length<a.minimum){return a.message;}if(a.maximum&&b.val().length>a.maximum){return a.message;}},email:function(b,a){if(!(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i.test(b.val()))){return a.message;}},dateFormat:function(b,a){if(Date.parseExact(b.val(),a.format)==null){return a.message;}},money:function(b,a){if(!(/^[\+|-]?[\d]+([\.][\d]{1,2})?$/.test(b.val()))){return a.message;}},allowNegative:function(b,a){if(parseFloat(b.val())<0){return a.message;}},allowZero:function(b,a){if(parseFloat(b.val())==0){return a.message;}},luhnCheck:function(c,a){var h=c.val();var d=0;var f=h.length;var e=f%2;for(var b=0;b<f;b++){var g=parseInt(h.charAt(b));if(b%2==e){g*=2;}if(g>9){g-=9;}d+=g;}if((d%10)!=0){return a.message;}},cardNumber:function(b,a){if(!$.payment.validateCardNumber(b.val())){return a.message;}},cardCVV:function(c,b){var d=$(jq(c.attr("data-cb"))).val();if(typeof d=="undefined"||d==""){return;}var a=$.payment.cardType(d);if(!$.payment.validateCardCVC(c.val(),a)){return b.message;}},vatNumber:function(c,b){var d=$(jq(b.vatnumber)).val();var a=$(jq("billing_address[country]")).val();if(HPUtil.showVATField(a)&&HPUtil.isVatFieldMandatory()&&!d){return b.message;}},registerForGst:function(d,c){var a=$(jq("customer[registered_for_gst]")).prop("checked");var b=$(jq("billing_address[country]")).val();if("AU"===b&&HPUtil.showRegisteredForGst(b)&&HPUtil.isRegisteredForGstFieldMandatory()&&false===a){return c.message;}},cardExpiry:function(c,a){var b=$(jq(a.month));if(!$.payment.validateCardExpiry(b.val(),c.val())){return a.message;}}},remote:{uniqueness:function(b,a){if((message=formValidation.validators.local.presence(b,a))&&a.allow_blank===true){return;}else{if(message){return message;}else{var c={};c.name=b.attr("name");c.value=b.val();var d=jQuery.ajax({url:"/validators/uniqueness",data:c,error:function(){try{var f=jQuery.parseJSON(d.responseText);jQuery.each(f.errors,function(h,e){if(e.param!=null){formValidation.errorHandler.add(b,e.message);b.trigger("element:validate:fail");}});}catch(g){}},success:function(){formValidation.errorHandler.remove(b);b.trigger("element:validate:pass");}});}}}}}};ajaxResponseHandlers.formhandler={beforeSend:function(b,a){ajaxResponseHandlers.defhandler.beforeSend(b,a);},success:function(b,c,d,a){ajaxResponseHandlers.defhandler.success(b,c,d,a);},error:function(b,d,c){var a=ajaxResponseHandlers.defhandler.parse(b.responseText);jQuery.each(a.errors,function(f,e){if(e.param!=null){formValidation.errorHandler.add($("[name='"+e.param+"']"),e.message,e.probable_reason);$("[name='"+e.param+"']").trigger("element:validate:fail");}});},complete:function(a,b){ajaxResponseHandlers.defhandler.complete(a,b);}};ajaxResponseHandlers.formhandlerv2={onBeforeSend:function(b,a){ajaxResponseHandlers.defhandlerv2.doBeforeSend(b,a);},onSuccess:function(b,c,d,a){ajaxResponseHandlers.defhandlerv2.onSuccess(b,c,d,a);},onError:function(a,c,b){ajaxResponseHandlers.formhandler.error(a,c,b);},onComplete:function(a,b){ajaxResponseHandlers.defhandlerv2.onComplete(a,b);}};
/*/assets/lib/javascripts/loading.js*/
$(document).ready(function(){if($(".cb-scroll-fix").length>0){$(window).scroll(function(){if($(window).scrollTop()>$(".cb-scroll-fix").offset().top){$(".cb-loading").css("position","fixed");$(".cb-loading").css("top","5px");}if($(window).scrollTop()<=$(".cb-scroll-fix").offset().top){$(".cb-loading").css("position","absolute");$(".cb-loading").css("top","90px");}});}});$(document).ready(function(){if($(".cb-scroll-fix").length>0&&$(".cb-simple-status").length==0){$(window).scroll(function(){if($(window).scrollTop()>$(".cb-scroll-fix").offset().top){$(".cb-status-flash").css("position","fixed");$(".cb-status-flash").css("top","5px");}if($(window).scrollTop()<=$(".cb-scroll-fix").offset().top){$(".cb-status-flash").css("position","absolute");$(".cb-status-flash").css("top","90px");}});}});$(document).ready(function(){if($(".cb-scroll-fix").length>0){$(window).scroll(function(){if($(window).scrollTop()>$(".cb-scroll-fix").offset().top){$(".cb-simple-status").css("position","fixed");$(".cb-simple-status").css("top","5px");$(".cb-simple-status").css("margin-top","0px");}if($(window).scrollTop()<=$(".cb-scroll-fix").offset().top){$(".cb-simple-status").css("position","absolute");$(".cb-simple-status").css("top","63px");$(".cb-simple-status").css("margin-top","-44px");}});}});$(document).ready(function(){if($(".cb-scroll-fix").length>0){$(window).scroll(function(){if($(window).scrollTop()>$(".cb-scroll-fix").offset().top){$("#navigation").css("position","fixed");$("#navigation").css("top","0");$("#navigation").css("min-width","1220px");$("#navigation").css("max-width","1280px");}if($(window).scrollTop()<=$(".cb-scroll-fix").offset().top){$("#navigation").css("position","absolute");$("#navigation").css("top","75px");}});}});$(document).ready(function(){if($(".cb-scroll-fix").length>0){$(window).scroll(function(){if($(window).scrollTop()>$(".cb-scroll-fix").offset().top){$(".cb-api-menu").css("position","absolute");$(".cb-api-menu").css("top","45px");}if($(window).scrollTop()<=$(".cb-scroll-fix").offset().top){$(".cb-api-menu").css("position","absolute");$(".cb-api-menu").css("top","45px");}});}});
/*/assets/lib/javascripts/i18n-utils.js*/
var getTranslatedMessage=function(b,a){if(typeof localized_keys==="undefined"){return a;}return localized_keys[b]||a;};
/*/assets/lib/javascripts/filter-util.js*/
var CBAdvFilterUtilStandard=(function(){var b={appendExtraParam:false,historyEnabled:false,moreFilterText:"More filters",hideFilterText:"Hide filters"};var l;var d=[];var p;var e=function(r){jQuery.extend(true,b,r);h();f();};var h=function(){if(b.search){d.push(b.search);}if(b.sort){d.push(b.sort);}if(b.filterby){d.push(b.filterby);}if(b.filterbyNamed){d.push(b.filterbyNamed);}for(var r in b.hiddenParam){if($(jq(b.hiddenParam[r])).val()!=undefined){d.push(b.hiddenParam[r]);}}};var f=function(){$("#cb-advClose").css("display","none");if(b.appendExtraParam){CBAdvFilter.extraConfig({extraParamFn:o});}$(document).ajaxStart(function(){p=b.target+"?"+k();});if(typeof rld!="undefined"){if(rld.length==0){$(".cb-detailedFilter").hide();$(".cb-more-filters").text(b.moreFilterText);}else{$(".cb-detailedFilter").show();CBAdvFilter.reloadAdvFilter(rld);$(".cb-more-filters").text(b.hideFilterText);}}if(b.historyEnabled){j();}$(".cb-table-options").submit(function(r){if($(".cb-detailedFilter").is(":visible")){$(".cb-form-fl #cb_apply_adv_filter").trigger("click");}else{$(this).ajaxhandler({url:b.target,type:"GET",success:function(t,u,v,s){m(p,true);i(t);},error:function(u,w,v){var s=ajaxResponseHandlers.defhandler.parse(u.responseText);var t="";jQuery.each(s.errors,function(y,x){if(x.param==null){t=flashMessage.getAsFlash("error",x.message);}});flashMessage.show(t);}});}r.preventDefault();});$(jq(b.container)).on("click",'a[class="cb-table-nav-link"]',function(r){l=$(this).attr("href");r.preventDefault();$(this).ajaxhandler("navigation");});$(".cb-more-filters, .cb-advClose").click(q);};var j=function(){CBAdvFilterHistory.configuration({tableformParamProvider:a,filterParamProvider:k,partUrl:b.target,fillTopForm:c,defaultValue:b.defaultValue,refreshContent:i,headingClass:b.headingClass,filterUtilConfig:b});};var i=function(r){if(b.search){$(jq(b.search)).placeholder();}$(jq(b.container)).empty();$(jq(b.container)).html(r);if(b.refreshCallBack){b.refreshCallBack();}};var g=function(){$(".cb-topFilter").hide();$(".cb-detailedFilter").show();$(".cb-more-filters").text(b.hideFilterText);if(!(_.isEmpty(time_filter[0]))){CBAdvFilter.reloadAdvFilter(time_filter);}else{CBAdvFilter.advFilter();}};ajaxResponseHandlers.navigation={success:function(t,u,v,s){var r=$("#cb-nav-total-count").html();i(t);$("#cb-nav-total-count").html(r);if(b.historyEnabled){CBAdvFilterHistory.addToHistory({nav:true,url:l});}},error:function(t,v,u){var r=ajaxResponseHandlers.defhandler.parse(t.responseText);var s="";jQuery.each(r.errors,function(x,w){if(w.param==null){s=flashMessage.getAsFlash("error",w.message);}});CBAdvFilter.addError(r);flashMessage.show(s);}};ajaxResponseHandlers.applyFilter={success:function(s,t,u,r){m(p,true);i(s);},error:function(t,v,u){var r=ajaxResponseHandlers.defhandler.parse(t.responseText);var s="";jQuery.each(r.errors,function(x,w){if(w.param==null){s=flashMessage.getAsFlash("error",w.message);}});CBAdvFilter.addError(r);flashMessage.show(s);}};var q=function(){if($(".cb-detailedFilter").is(":visible")){$(".cb-detailedFilter").hide();if($(".cb-table-options").length===0){var r=$('input[name="max_id"]').parents("form");r.find("#cb-filter").empty();r.find("#cb_apply_adv_filter").trigger("click");}else{$(".cb-table-options").trigger("submit");}$(".cb-more-filters").text(b.moreFilterText);}else{g();}};var o=function(){var u=a();var r=$('input[name="max_id"]').parent();for(var t=0;t<d.length;t++){var s=$('input[name="max_id"]').parent();if(r.children('input[name="'+d[t]+'"]').length==0){s.append('<input type="hidden" name="'+d[t]+'" value="'+_.escape(u[d[t]])+'"/>');}else{r.children('input[name="'+d[t]+'"]').val(_.escape(u[d[t]]));}}};var a=function(){var s={};for(var r=0;r<d.length;r++){if(d[r]==b.search){var t=$(jq(d[r]));s[d[r]]=n(t);}else{s[d[r]]=$(jq(d[r])).val();}}return s;};var n=function(r){if(!Modernizr.input.placeholder){if(r.hasClass("placeholder")&&r.val()==r.attr("placeholder")){return"";}}return r.val();};var k=function(){var r;if($(".cb-detailedFilter").is(":visible")){o();r=$('input[name="max_id"]').parents("form").cbSerialize();}else{if(b.search){$(jq(b.search)).val(n($(jq(b.search))));}r=$(".cb-table-options").cbSerialize();}return r;};var c=function(s){for(var r=0;r<d.length;r++){if(d[r]==b.search){$(jq(d[r])).val(s[d[r]]);}else{$(jq(d[r])).find("option[value='"+s[d[r]]+"']").attr("selected","selected").trigger("liszt:updated");}}};var m=function(r,s){$(this).ajaxhandler({url:r,type:"GET",data:{nav_count:true},success:function(u,v,w,t){$("#cb-nav-total-count").html(u.nav_total);if(b.historyEnabled&&s){CBAdvFilterHistory.addToHistory();}},error:function(v,x,w){var t=ajaxResponseHandlers.defhandler.parse(v.responseText);var u="";jQuery.each(t.errors,function(z,y){if(y.param==null){u=flashMessage.getAsFlash("error",y.message);}});flashMessage.show(u);}});};return{initialize:e,topFormJson:a,paramSubscription:k,loadNavCount:m};}());
/*/assets/lib/javascripts/save-history.js*/
var CBAdvFilterHistory=(function(){var i;var c={};var h={};var b=function(k){jQuery.extend(true,c,k);if(typeof window.history.pushState==="function"){window.onpopstate=function(l){if(!_.isEmpty(c)){j(l.state);}};}h=c.tableformParamProvider();j();};var j=function(m){var l=parseURL(window.location.href).params;if(window.location.hash==""&&_.isEmpty(l)){g(c.defaultValue);}else{if(window.location.hash==""&&!_.isEmpty(l)){if(i==undefined&&typeof window.history.pushState==="function"){var k={};k.tableFormParam=h;k.url=window.location.href;k.uniqueHash="#filter"+f();window.history.replaceState(k,document.title,k.url);}if(m==undefined||m==null){g(h);}else{g(m.tableFormParam);}}else{if(window.sessionStorage&&sessionStorage.getItem(window.location.hash)&&i!=window.location.href){var k=JSON.parse(sessionStorage.getItem(window.location.hash));var n=parseURL(k.url).params;if(n.subscriptionid){$('input[name="subscriptionid"]').val(n.subscriptionid);}if(n.customerid){$('input[name="customerid"]').val(n.customerid);}i=window.location.href;c.fillTopForm(k.tableFormParam);if(typeof k.nav_total!="undefined"&&k.nav_total){CBAdvFilterHistory.sendRequest(k.url,k.nav_total);}else{CBAdvFilterHistory.sendRequest(k.url);}}else{g(c.defaultValue);}}}};var g=function(k){if(i!=window.location.href){i=window.location.href;CBAdvFilterHistory.sendRequest(i);c.fillTopForm(k);}};var d=function(m){if(m==undefined){m={nav:false};}if(typeof window.history.pushState==="function"){var k=(m.nav)?m.url:c.partUrl+"?"+c.filterParamProvider();var n={};n.tableFormParam=c.tableformParamProvider();n.url=k;n.uniqueHash="#filter"+f();n.nav_total=$("#cb-nav-total-count").html();var l=window.history.state;if(e(l,n)&&!m.nav){window.history.replaceState(l,document.title,c.partUrl+l.uniqueHash);}else{window.history.pushState(n,document.title,c.partUrl+n.uniqueHash);sessionStorage.setItem(n.uniqueHash,JSON.stringify(n));i=window.location.href;}}};var e=function(k,l){if(k!=null&&_.isEqual(k.tableFormParam,l.tableFormParam)&&k.url===l.url){return true;}else{return false;}};var f=function(){return(new Date).getTime();};var a=function(k,l){$(this).ajaxhandler({url:k,type:"GET",success:function(n,p,q,m){c.refreshContent(n);var o=$("#cb-heading-update-temp").html();if(o!=null&&$("#cb-heading-update-temp").children().length>0){$("."+c.headingClass).html(o);}if(typeof rld!="undefined"){if(rld.length==0){$(".cb-detailedFilter").hide();$(".cb-more-filters").text(c.filterUtilConfig.moreFilterText);}else{CBAdvFilter.reloadAdvFilter(rld);$(".cb-detailedFilter").show();$(".cb-more-filters").text(c.filterUtilConfig.hideFilterText);}}if(typeof l=="undefined"||l==null){CBAdvFilterUtilStandard.loadNavCount(k,false);}else{$("#cb-nav-total-count").html(l);}},error:function(o,q,p){var m=ajaxResponseHandlers.defhandler.parse(o.responseText);var n="";jQuery.each(m.errors,function(s,r){if(r.param==null){n=flashMessage.getAsFlash("error",r.message);}});flashMessage.show(n);}});};return{configuration:b,addToHistory:d,sendRequest:a,handleRefresh:j};}());
/*/assets/lib/javascripts/zeno-clipboard.js*/
var CBZenoClipBoard=(function(b){var c=function(f,e){var g=null,d=null;d=b("[data-clipboard]");g=new Clipboard("[data-clipboard]");d.on("mouseout",function(){var h=b(this).attr("text")||f;b(this).attr("original-title",(typeof h!=="undefined"||h==="")?h:"");b(this).tipsy("hide");});d.on("mouseover",function(){a(this);b(this).tipsy("show");});g.on("success",function(h){b(h.trigger).attr("original-title",(e||"Copied!"));b(h.trigger).tipsy("show");h.clearSelection();});g.on("error",function(h){var i=window.navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)?"Press Cmd+C to Copy":"Press Ctrl+C to Copy";b(h.trigger).attr("original-title",i);b(h.trigger).tipsy("show");});};function a(d){b(d).tipsy({gravity:"s",title:function(){var e=b(d).attr("original-title");if(typeof e==="undefined"||e===""){e=b(d).attr("text");}return(typeof e!=="undefined"||e==="")?e:"Copy to Clipboard";}});}b(document).ready(function(){c();});return{initCommonClipboard:c,setTitle:a};})(jQuery);
/*/assets/lib/javascripts/client.js*/
(function(){CLIENT_PROPS={"screen.width":"sw","screen.height":"sh","screen.availWidth":"saw","screen.availHeight":"sah","window.outerWidth":"wow","window.outerHeight":"woh","window.innerWidth":"wiw","window.innerHeight":"wih","document.body.clientWidth":"bcw","document.body.clientHeight":"bch","document.body.offsetHeight":"boh","document.body.offsetWidth":"bow","document.documentElement.clientWidth":"dcw","document.documentElement.clientHeight":"dch","document.documentElement.offsetHeight":"doh","document.documentElement.offsetWidth":"dow","window.orientation":"wo"};var value="",propVal,sep="";for(var prop in CLIENT_PROPS){try{propVal=eval(prop);}catch(e){propVal="0";}if(typeof propVal==="undefined"){propVal="-1";}value+=sep+CLIENT_PROPS[prop]+":"+propVal;sep=",";}})();
/*/assets/lib/javascripts/select-2-util.js*/
(function(f){var e="data-cb-datasource",q="data-cb-remote-target",g="placeholder",i="data-cb-select",k="data-cb-onchange-handler",b="data-cb-extra-param-id",h="data-cb-prefetch",d="data-cb-screening-list";var p="Type to get more result ...",m=true;f(document).ready(function(){var s=f("input[data-cb-select]");for(var r=0;r<s.length;r++){f(s[r]).cbSelect2Bind();}});var j={};var c={};f.fn.cbSelect2Bind=function(){if(_.isUndefined(f(this).attr(e))){var r=new a();r._bind(this);j[f(this).attr("name")]=r;}else{o.call(this);}};var o=function(){if(_.isUndefined(c)){c={};}var t=f(this).attr(e);if(!c.hasOwnProperty(t)||!(c[t] instanceof n)){c[t]=new n(f(this).attr(q));}var r={};r[e]=c[t];var s=new a();s._bind(this,r);};f.fn.cbSelect2Reset=function(){var r=f(this).attr(e);if(!_.isUndefined(r)){if(_.isUndefined(c)||_.isUndefined(c[r])){return;}c[r].dataMap={};c[r].resultMap={};c[r].prefetchMap={};c[r].prefetchResult=[];c[r].remoteRequired=true;}else{if(_.isUndefined(j)){return;}var s=j[f(this).attr("name")];if(_.isUndefined(s)){return;}s.dataSource.dataMap={};s.dataSource.resultMap={};s.dataSource.prefetchMap={};s.dataSource.prefetchResult=[];s.dataSource.remoteRequired=true;}};window.select2ChangeHandler={};var n=function(){var u="id",r="text",s="hasMore";function t(v){this.remoteSource=v;this.requestState=new l();this.dataMap={};this.resultMap={};this.prefetchMap={};this.prefetchResult=[];this.remoteRequired=true;this.screeningList=null;}f.extend(t.prototype,{formatResult:function(x,z,v){var A=0;for(var w in z){if(!_.isObject(z[w])){continue;}if(this.screeningList!==null&&_.indexOf(this.getSreenList(),z[w][u],false)!==-1){continue;}var y={};y[u]=z[w][u];y[r]=z[w][r];x=this.arraySortedPush(x,y);A++;if(!_.isUndefined(v)&&v===A){break;}}this.addHasMoreMessage(x,z);},arraySortedPush:function(w,x){if(w.length===0){w.push(x);return w;}for(var v=0;v<w.length;v++){if((w[v][r]).toLowerCase()>(x[r]).toLowerCase()){w.splice(v,0,x);return w;}}w.push(x);return w;},setPrefetch:function(v,w){if(_.isUndefined(v)||!_.isObject(v)){return;}f.extend(w.dataMap,v,true);w.prefetchMap=v;w.remoteRequired=v[s];w.formatResult.call(w,w.prefetchResult,v);},prefetch:function(){this.requestState.remoteFetch(this.remoteSource,"",{fn:this.setPrefetch,context:this});},get:function(v,w){if(_.isUndefined(v)||v.term===""){if(w.prefetchResult.length===0){w.requestState.remoteFetch(w.remoteSource,"",{fn:function(x,y){y.setPrefetch(x,y);v.callback({results:y.prefetchResult});},context:w});}else{if(w.screeningList!==null){w.prefetchResult=[];w.formatResult.call(w,w.prefetchResult,w.prefetchMap);}v.callback({results:w.prefetchResult});}}else{w.search.call(w,v);}},searchPrefetch:function(w){var v=this.matcher(w,this.prefetchMap);w.callback({results:v});},matcher:function(x,z){var v=[];for(var w in z){if(!_.isObject(z[w])){continue;}if(this.screeningList!==null&&_.indexOf(this.getSreenList(),z[w][u],false)!==-1){continue;}if(x.matcher(x.term,z[w][r])){var y={};y[u]=z[w][u];y[r]=z[w][r];v.push(y);}}this.addHasMoreMessage(v,z);return v;},setSearchResult:function(x,y){if(_.isUndefined(y)||!_.isObject(y)){return;}var v={};v[x.term]=y;f.extend(this.dataMap,y,true);f.extend(this.resultMap,v,true);var w={results:[]};this.formatResult.call(this,w.results,y);x.callback(w);},searchResults:function(z,y,w){if(_.isUndefined(y)||y===null||y===""){this.remote(z);}else{if(this.resultMap[y]&&z.term===y){var v=this.matcher(z,this.resultMap[y]);z.callback({results:v});}else{if(_.isUndefined(w)){this.searchResults(z,y.substr(0,y.length-1),this.resultMap[y]);}else{var x=this.resultMap[z.term.substr(0,y.length+1)];if(x[s]){this.remote(z);}else{var v=this.matcher(z,x);z.callback({results:v});}}}}},remote:function(v){this.requestState.remoteFetch(this.remoteSource,v.term,{context:this,fn:function(){var w={query:v};return function(x,y){y.setSearchResult.call(y,w.query,x);};}()});},search:function(v){if(!this.remoteRequired){this.searchPrefetch(v);}else{this.searchResults(v,v.term);}},selected:function(A,C,B){var y=f(A).val();if(y!==""){var w=f.parseJSON(y);var x="";if(_.isArray(w)){for(var z=0;z<w.length;z++){x=x+w[z][u];if(z!==w.length-1){x=x+",";}}}else{x=w[u];}f(A).val(x);C(w);}},getSreenList:function(){var v=[];if(this.screeningList===null){return v;}if(!_.isUndefined(window[this.screeningList])&&_.isArray(window[this.screeningList])){return window[this.screeningList];}return window[this.screeningList];},addHasMoreMessage:function(v,w){if(m&&w[s]){v.push({id:"",text:p,disabled:true});}}});return t;}();var l=function(){function r(){this.requestStack=[];this.paramElement=[];}f.extend(r.prototype,{abort:function(){if(_.isUndefined(this.requestStack)){return;}for(var s=0;s<this.requestStack.length;s++){this.requestStack[s].abort();}},remoteFetch:function(u,t,s){this.abort();if(_.isUndefined(s.params)||!_.isObject(s.params)){s.params={};}s.params.searchText=t;this.requestStack.push(f.ajax({url:u,type:"GET",context:s.context,traditional:true,data:this.appendExtraParam(s.params),success:function(v,x,w){if(_.isFunction(s.fn)){s.fn(v,this);}},error:function(v,x,w){if(x==="abort"){return;}ajaxResponseHandlers.defhandler.error(v,x,w);}}));},appendExtraParam:function(x){for(var w=0;w<this.paramElement.length;w++){var u=f(this.paramElement[w]);var t=u.attr("name");var s=u.val();if(s===""||t===""){continue;}s=JSON.parse(s);x[t]=s;}return x;}});return r;}();var a=function(){function r(){this.$e;this.multiSelect;this.placeHolder;this.dataSource;}f.extend(r.prototype,{query:function(s){return function(t){s.get(t,s);};},initSelection:function(s){return function(t,u){s.selected(t,u,s);};},select2:function(){var s=this.query(this.dataSource);this.$e.select2({placeholder:this.placeHolder,multiple:this.multiSelect,query:s,initSelection:this.initSelection(this.dataSource),allowClear:true});},_bind:function(t,s){this.$e=f(t);this.placeHolder=this.$e.attr(g);this.multiSelect=this.$e.attr(i)==="multiselect"?true:false;if(!_.isUndefined(s)&&s.hasOwnProperty(e)){this.dataSource=s[e];}else{this.dataSource=new n(this.$e.attr(q));}if(!_.isUndefined(this.$e.attr(d))){this.dataSource.screeningList=this.$e.attr(d);}this.selectChangeHandler=this.$e.attr(k);if(this.$e.attr(h)==="true"){this.dataSource.prefetch();}this.select2();this.selectChange();this.initExtraParamElements();},selectChange:function(){this.$e.on("change",this.change(this));},change:function(s){return function(u){var t=window.select2ChangeHandler[s.selectChangeHandler];if(!_.isUndefined(s.selectChangeHandler)&&_.isFunction(t)){t.call(s.$e,s.dataSource.dataMap[u.val]);}};},initExtraParamElements:function(){var v=this.$e.attr(b);if(_.isUndefined(v)||v===""){return;}var w=f("#"+v).find('input[type="hidden"]');for(var u=0;u<w.length;u++){var t=f(w[u]);var s=t.attr("name");if(s===""){continue;}this.dataSource.requestState.paramElement.push(t);}}});return r;}();})(window.jQuery);
/*/assets/lib/javascripts/filter-util-new.js*/
(function(f){var g=function(){function h(i){this.requestTracker={basicRequest:[],navRequest:[],historyRequest:[]};this.conf=f.extend(true,{},a(),i);this.initialize();this.AdvFilter=f(this.filter.$form).AdvanceFilter(this.conf.advFiltersConf,this.conf.fltDataType,this.conf.fltDateFmt,this.conf.fltValidator);this.eventBind();this.ajaxHandlerDefn();}f.extend(h.prototype,{initialize:function(){this.$container=f(e(this.conf.tableResponseContainer,"table"));this.view={};this.view.$form=f("form"+e(this.conf.viewFormKey));this.view.$selector=this.view.$form.find(e(this.conf.viewSelectKey));this.view.defVal=this.view.$selector.val();this.view.origFilContent;this.view.showSaveButton=false;this.filter={};this.filter.$container=f(e(this.conf.fltContainerKey));this.filter.$form=this.filter.$container.find(e(this.conf.fltFormKey));this.filter.$open=f(e(this.conf.fltOpenKey));this.filter.$close=this.filter.$container.find(e(this.conf.fltCloseKey));this.target=this.view.$form.attr("action");},eventBind:function(){var i=this;this.$container.on("change",e(this.conf.chkAllKey),function(k){var j=i.$container.find(e(i.conf.chkChildKey));var l=i.$container.find(e(i.conf.tblPanelBodyKey,"panel-body"));if(f(this).is(":checked")){j.attr("checked","checked");l.find(e(i.conf.tblPanelSelTotalKey)).text(f(jq(i.conf.navTotalTopId)).text());l.fadeIn(250);}else{j.removeAttr("checked");l.slideUp(250);}});this.$container.on("change",e(this.conf.chkChildKey),function(n){var k=i.$container.find(e(i.conf.chkChildKey));var o=i.$container.find(e(i.conf.tblPanelBodyKey,"panel-body"));var j=i.$container.find(e(i.conf.chkAllKey));var m=0;for(var l=0;l<k.length;l++){if(f(k[l]).is(":checked")){m++;}}if(m===k.length){j.attr("checked","checked");o.find(e(i.conf.tblPanelSelTotalKey)).text(f(jq(i.conf.navTotalTopId)).text());o.fadeIn(250);}else{j.removeAttr("checked");o.slideUp(250);}});this.$container.on("ajaxload:table:success",function(j){i.$container.find(e(i.conf.tblDateCol,"pretty-date")).each(function(k){f(f(this).parent()).on("mouseenter",function(m){var l=f(this);l.find(e(i.conf.tblDateCol,"pretty-date")).hide();l.find(e(i.conf.tblDateCol,"actual-date")).show();}).on("mouseleave",function(m){var l=f(this);setTimeout(function(){l.find(e(i.conf.tblDateCol,"pretty-date")).show();l.find(e(i.conf.tblDateCol,"actual-date")).hide();},150);});});i.$container.find("[original-title]").tipsy({gravity:"s",opacity:1});if(!i.filter.$container.is(":visible")){i.$container.find(e(i.conf.tblOptEleKey,"search")).focus();}if(createNewFilter){f('[data-cb-view-flt-open="edit-filter"]').click();}i.$container.find("a[popup]").attr("oncontextmenu","return false");i.$container.find("a[data-cb-js-handler]").attr("oncontextmenu","return false");});this.filter.$form.find('[data-cb-flt-add-btn="Apply-button"]').on("click",function(m){f(".has-error").removeClass("has-error");try{if(i.AdvFilter.validate()){i.loadTableOnly();var k=i.view.$selector.val();var l=i.view.$form.find('option[value="'+k+'"]').attr("itemprop");var j=window.cbFilterUtilObj.view.$form.find('option[value="'+k+'"]').text();if(i.view.showSaveButton){i.filterTypeCheck(l,j,i.view.showSaveButton);}}else{i.filter.$form.trigger("form:validate:fail");}}finally{m.preventDefault();}});this.$container.on("click","a[data-cb-js-handler]",function(k){try{if(i.filter.$container.is(":visible")&&!i.AdvFilter.validate()){return;}var j=f(this).attr("data-cb-js-handler");actionJsHandler[j].call(this,i);}finally{k.preventDefault();return false;}});this.view.$selector.on("change",function(n){try{if(i.filter.$container.is(":visible")){i.filter.$container.hide();i.handleUntitledView(false);}var l=f(this).val();var k=i.view.$selector.find("option"+e("value",l)).text().length;var j=(114+k)+"px;";f(this).select2({dropdownCssClass:"cb-view-selector-mask",width:j,dropdownAutoWidth:true,formatSelection:function(p,o){return'<b id="select-result">'+Select2.util.escapeMarkup(p.text)+"</b>";}});i.loadTableOnly();}catch(m){n.preventDefault();}});this.view.$form.on("submit",function(j){try{i.loadTableOnly();}finally{j.preventDefault();}});this.$container.on("click",e(this.conf.navLinkKey,"nav-link"),function(j){i.navCacheUrl=f(this).attr("href");j.preventDefault();f(this).ajaxhandler("_new_navigation");});this.filter.$open.on("click",function(j){if(i.filter.$container.is(":visible")){i.filter.$container.slideUp(200);i.handleUntitledView(false);i.view.$selector.trigger("change");}else{if(_.isUndefined(rld)||rld.length===0){i.AdvFilter.genFilter();}else{i.AdvFilter.reloadFilter(rld);}i.handleUntitledView(true);i.filter.$container.slideDown(200);}});if(this.conf.historyEnabled){this.initHistory();}this.filter.$close.on("click",function(){i.filter.$container.slideUp(200);i.handleUntitledView(false);i.view.$selector.trigger("change");});this.$container.on("submit",e(this.conf.tblOptFormKey,"form"),function(j){try{if(i.filter.$container.is(":visible")&&!i.AdvFilter.validate()){return false;}i.loadTableOnly();}finally{j.preventDefault();}});this.view.$selector.on("select2-selecting",function(j){if(i.filter.$container.is(":visible")&&f(this).val()===j.val){f(this).trigger("change");}});this.filter.$container.on("focus",e("data-cb-flt-grp-type","input"),function(j){if(f(this).hasClass("has-error")){var k=this;f(this).find('[id$=".err"]').fadeOut(150,function(){f(k).find('[id$=".err"]').empty();f(k).removeClass("has-error");});}});f("#update-filter-btn").on("click",function(n){try{if(i.AdvFilter.validate()){var o=f(i.filter.$form).cbSerialize();var m=i.view.$selector.val();var k=i.view.$form.find('option[value="'+m+'"]').attr("itemref");var l=i.view.$form.attr("action");o=o+"&url="+l+"&_csrf_token="+f("meta[name=csrf-token]").attr("content");var j=document.createElement("a");f(j).ajaxhandler({url:k,type:"POST",data:o,beforeSend:i.beforeSendHandler("basicRequest",i),success:function(r,s,u,q){i.filter.$close.click();i.view.showSaveButton=false;isFilteredByView=true;var p=i.view.$form.find('option[value="'+m+'"]').text().trim();var t=flashMessage.getAsFlash("persist_notice","Changes to '"+p+"' have been saved.");flashMessage.show(t);},error:i.errorHandler(),complete:i.onComplete(i)});}else{i.filter.$form.trigger("form:validate:fail");}}finally{n.preventDefault();}});f(document).on("change","#filter-form input",function(){i.formStatus();});f(document).on("click","button.btn.btn-xs.btn-danger",function(){i.formStatus();});this.filter.$form.find('[data-cb-flt-add-btn="add-button"]').on("click",function(){i.formStatus();});},formStatus:function(){var j=this.view.$selector.val();var i=this.view.$form.find('option[value="'+j+'"]').text();var k=this.view.$form.find('option[value="'+j+'"]').attr("itemprop");f("#save-btn").hide();f("#update-filter-btn").hide();f("#save-as-btn").hide();var l=f(this.filter.$form).serializeArray();l=l.slice(1);if(_.isEqual(f(this.view.origFilContent).selector,JSON.stringify(l))){f("#select-result").text(i);this.view.showSaveButton=false;}else{this.filterTypeCheck(k,i,false);}},filterTypeCheck:function(k,j,i){if(k==="OWN_PRIVATE"||k==="OWN_PUBLIC"){f("#select-result").text(j+"*");if(i){f("#update-filter-btn").show();f("#save-as-btn").show();}else{this.view.showSaveButton=true;}}else{f("#select-result").text("Untitled View *");if(i){f("#save-btn").show();}else{this.view.showSaveButton=true;}}},handleUntitledView:function(k){var n=this;var j=this.view.$selector.val();var i=this.view.$form.find('option[value="'+j+'"]').text();var l=this.view.$form.find('option[value="'+j+'"]').attr("itemprop");if(k){f('[data-cb-view-flt-open="edit-filter"]').text("Hide Filter");}else{f('[data-cb-view-flt-open="edit-filter"]').text("Show Filter");}f("#select-result").text(i);if(k){this.view.showSaveButton=false;f("#manage_filters").show();f("#save-btn").hide();f("#update-filter-btn").hide();f("#save-as-btn").hide();if(_.isEmpty(f(this.view.origFilContent))&&typeof isFilteredByView!=="undefined"&&isFilteredByView){var m=f(this.filter.$form).serializeArray();m=m.slice(1);this.view.origFilContent=JSON.stringify(m);}else{if(!_.isEmpty(originalFilterContent)){this.view.origFilContent=originalFilterContent;var m=f(this.filter.$form).serializeArray();m=m.slice(1);if(!_.isEqual(originalFilterContent,JSON.stringify(m))){this.view.showSaveButton=true;if(l==="OWN_PRIVATE"||l==="OWN_PUBLIC"){f("#select-result").text(i+"*");f("#update-filter-btn").show();f("#save-as-btn").show();}else{f("#select-result").text("Untitled View *");f("#save-btn").show();}}}else{n.filterTypeCheck(l,i,true);}}this.filter.$open.removeClass("cb-icon-new-filter-funnel").addClass("cb-icon-new-filter-funnel--open");this.filter.$open.attr("original-title","Hide filter").tipsy("hide");}else{f("#manage_filters").hide();this.filter.$open.removeClass("cb-icon-new-filter-funnel--open").addClass("cb-icon-new-filter-funnel");this.filter.$open.attr("original-title","Show filter").tipsy("hide");this.view.origFilContent=null;}},checkForFilter:function(){var i=this;if((typeof isFilteredByView!=="undefined"&&!isFilteredByView)&&!_.isUndefined(rld)&&rld.length>0){i.AdvFilter.reloadFilter(rld);setTimeout(function(){i.handleUntitledView(true);i.filter.$container.slideDown(200);},50);}else{if(createNewFilter){i.filter.$container.slideDown(200);createNewFilter=false;}else{i.filter.$container.slideUp(200);}}},appendTblOptParam:function(){var n=this.$container.find(e(this.conf.tblOptFormKey)).find(e(this.conf.tblOptEleKey));var m=this.filter.$form.find(e(this.conf.fltHiddenKey));for(var l=0;l<n.length;l++){var k=f(n[l]);if(_.isUndefined(k.attr("name"))||k.attr("name")==="view_code"){continue;}var j=m.find(e("name",k.attr("name")));if(!_.isUndefined(j)&&j.length>0){j.val(k.val());}else{var o=document.createElement("input");f(o).attr("type","hidden").attr("name",k.attr("name")).val(k.val());m.append(f(o));}}},loadTableOnly:function(i){var j,k,l=this;if(_.isUndefined(i)){j=l.view.$form.attr("action");k=l.allParam(false);}else{j=i;k={};}f(this).ajaxhandler({url:j,type:"GET",data:k,beforeSend:l.beforeSendHandler("basicRequest",l),success:function(n,o,p,m){l.loadNavCount(n.navCountUrl,true);l.refreshContent(n);},error:l.errorHandler(),complete:l.onComplete(l)});},initHistory:function(){this.history=new b(this);},defaultValue:function(){var i={};i.viewVal=this.view.defVal;return i;},refreshContent:function(i){this.$container.empty();this.$container.html(i.htmlContent);if(this.conf.refreshCallBack){this.conf.refreshCallBack();}if(i.hasOwnProperty("currentUrl")){this.currentUrl=i.currentUrl;}if(i.hasOwnProperty("baseData")){this.attachRemoteHoverSummary(i.baseData);}new d(this.$container,this,{},true,"");this.$container.find(".cb-select2-box").select2({dropdownAutoWidth:false,width:"189px"});this.$container.trigger("ajaxload:table:success");},attachRemoteHoverSummary:function(k){for(var j in k){new d(this.$container,this,k[j],false,j);}},currentVal:function(){var i={};i.viewVal=this.view.$selector.val();return i;},syncForm:function(i){var j=this.view.$selector.find("option"+e("value",i.viewVal)).length>0;i.viewVal=!j?this.view.$selector.attr("data-cb-default"):i.viewVal;if(_.isUndefined(this.view.$selector.data("select2"))){this.view.$selector.val(i.viewVal);}else{this.view.$selector.select2("val",i.viewVal);}if(!j){return false;}return true;},allParam:function(o){if(this.filter.$container.is(":visible")){return f(this.filter.$form).cbSerialize()+"&"+this.$container.find(e(this.conf.tblOptFormKey,"form")).cbSerialize();}else{if(!_.isUndefined(o)&&!o){return f(this.view.$form).cbSerialize()+"&"+this.$container.find(e(this.conf.tblOptFormKey,"form")).cbSerialize();}if(_.isUndefined(rld)||rld.length===0){return this.$container.find(e(this.conf.tblOptFormKey,"form")).cbSerialize();}var l=[];l.push({name:"max_id",type:"hidden",value:rld.length});l.push({name:"time_flt[cond]",type:"hidden",value:"timeFlt"});l.push({name:"time_flt[val]",type:"hidden",value:"no_filter"});for(var n=0;n<rld.length;n++){var k=rld[n]["filter[column]"];l.push({name:"filter[column]["+(n+1)+"]",value:k});var r=rld[n]["filter[cond]"];l.push({name:"filter[cond]["+(n+1)+"]",value:r});var q=null,p=null;if(rld[n].hasOwnProperty("filter[input][1]")){q=rld[n]["filter[input][1]"];}if(rld[n].hasOwnProperty("filter[input][2]")){p=rld[n]["filter[input][2]"];}if(r==="between"&&q!==null&&p!==null){l.push({name:"filter[from]["+(n+1)+"]",value:q});l.push({name:"filter[to]["+(n+1)+"]",value:p});}else{if(q!==null&&_.isArray(q)){for(var m=0;m<q.length;m++){if(_.isObject(q[m])&&!_.isUndefined(q[m]["id"])){l.push({name:"filter[input]["+(n+1)+"]",value:q[m]["id"]});}else{l.push({name:"filter[input]["+(n+1)+"]",value:q[m]});}}}else{if(q!==null){if(_.isObject(q)&&!_.isUndefined(q.id)){l.push({name:"filter[input]["+(n+1)+"]",value:q.id});}else{l.push({name:"filter[input]["+(n+1)+"]",value:q});}}}}}return f.param(l)+"&"+this.$container.find(e(this.conf.tblOptFormKey,"form")).cbSerialize();}},ajaxHandlerDefn:function(){var i=this;ajaxResponseHandlers._new_navigation={beforeSend:i.beforeSendHandler("basicRequest",i),success:function(l,m,n,k){var j=f(jq(i.conf.navTotalTopId)).text();i.refreshContent(l);f(jq(i.conf.navTotalTopId)).text(j);f(jq(i.conf.navTotalBottomId)).text(j);if(i.conf.historyEnabled){i.history.addToHistory({nav:true,url:i.navCacheUrl});}},error:i.errorHandler(),complete:i.onComplete(i)};ajaxResponseHandlers.save_filter_modal_event={on_click:function(m,l){if(i.AdvFilter.validate()){var n=f(i.filter.$form).cbSerialize();var k=i.view.$form.attr("action");var j=f(l).attr("data-href")+"?"+n;f(l).attr("href",j);f(l).attr("param-url",k);return true;}else{i.filter.$form.trigger("form:validate:fail");return false;}}};},errorHandler:function(){return function(k,m,l){if(k.statusText!=="abort"){var i=ajaxResponseHandlers.defhandler.parse(k.responseText);var j="";jQuery.each(i.errors,function(o,n){if(!_.isUndefined(n.param)){formValidation.errorHandler.add(f("[name='"+n.param+"']"),n.message);}else{j=flashMessage.getAsFlash("error",n.message);}});if(j!==""){flashMessage.show(j);}f(".text-danger:visible").each(function(n,o){f(o).parents(".form-group").addClass("has-error");});}};},beforeSendHandler:function(i,j){return function(l,k){j.abortRequests(i);j.requestTracker[i].push(l);if(_.isUndefined(l._form_)){l._form_=k._form_;}if(i!=="navRequest"){f(jq(j.conf.tblLoadingId)).show();}};},onComplete:function(i){return function(j,k){f(jq(i.conf.tblHelpTxtId)).show();f(jq(i.conf.tblLoadingId)).fadeOut(200);};},abortRequests:function(j){if(_.isUndefined(this.requestTracker[j])||this.requestTracker[j].length===0){return;}for(var k=0;k<this.requestTracker[j].length;k++){this.requestTracker[j][k].abort();}this.requestTracker[j]=[];},loadNavCount:function(i,j){var k=this;f(this).ajaxhandler({url:i,type:"GET",data:{nav_count:true},beforeSend:k.beforeSendHandler("navRequest",k),success:function(m,n,o,l){f(jq(k.conf.navTotalTopId)).text(m.nav_total);f(jq(k.conf.navTotalBottomId)).text(m.nav_total);if(k.conf.historyEnabled&&j){k.history.addToHistory({nav:false,url:i});}},error:function(n,p,o){if(n.statusText!=="abort"){var l=ajaxResponseHandlers.defhandler.parse(n.responseText);var m="";jQuery.each(l.errors,function(r,q){if(q.param===null){m=flashMessage.getAsFlash("error",q.message);}});flashMessage.show(m);}}});}});return h;}();var b=function(){function h(i,j){this.u=i;this.cacheUrl;this.version=1;this.config=f.extend(true,{},j);if(typeof this.u.AdvFilter!=="undefined"&&!this.u.AdvFilter.nofilterConf){this.configure();}}f.extend(h.prototype,{configure:function(){var i=this;if(typeof window.history.pushState==="function"){window.onpopstate=function(j){i.handleRefresh(j.state);};}this.elDefValue=this.u.currentVal();this.handleRefresh();},handleRefresh:function(l){var k=parseURL(window.location.href).params;if(window.location.hash===""&&_.isEmpty(k)){this.defaultLoad(this.u.defaultValue());}else{if(window.location.hash===""&&!_.isEmpty(k)){if(this.cacheUrl===undefined&&typeof window.history.pushState==="function"){var j={};j.tableFormParam=this.elDefValue;j.url=window.location.href;j.uniqueHash="#filter"+this.uniqueId();window.history.replaceState(j,document.title,j.url);}if(_.isUndefined(l)||l===null){this.defaultLoad(this.elDefValue);}else{this.defaultLoad(l.tableFormParam);}}else{if(window.sessionStorage&&sessionStorage.getItem(window.location.hash)&&this.cacheUrl!==window.location.href){var j=JSON.parse(sessionStorage.getItem(window.location.hash));if(j.version!==this.version){window.sessionStorage.clear();this.defaultLoad(this.u.defaultValue());}else{if(j.origFilContent!=="undefined"){originalFilterContent=j.origFilContent;}var m=parseURL(j.url).params;if(m.subscriptionid){f('input[name="subscriptionid"]').val(m.subscriptionid);}if(m.customerid){f('input[name="customerid"]').val(m.customerid);}this.cacheUrl=window.location.href;var i=this.u.syncForm(j.tableFormParam);if(typeof j.nav_total!=="undefined"&&j.nav_total&&i){this.sendRequest(j.url,j.nav_total);}else{this.sendRequest(j.url);}}}else{this.defaultLoad(this.u.defaultValue());}}}},defaultLoad:function(i){if(this.cacheUrl!==window.location.href){this.cacheUrl=window.location.href;this.sendRequest(this.cacheUrl);this.u.syncForm(i);}},addToHistory:function(k){if(typeof window.history.pushState==="function"){var i=k.url;var l={};l.tableFormParam=this.u.currentVal();l.url=i;l.origFilContent=f(window.cbFilterUtilObj)!=="undefined"?f(window.cbFilterUtilObj.view.origFilContent).selector:null;l.uniqueHash="#filter"+this.uniqueId();l.nav_total=f(jq(this.u.conf.navTotalTopId)).html();l.version=this.version;var j=window.history.state;if(this.stateSame(j,l)&&!k.nav){window.history.replaceState(j,document.title,this.u.target+j.uniqueHash);}else{window.history.pushState(l,document.title,this.u.target+l.uniqueHash);sessionStorage.setItem(l.uniqueHash,JSON.stringify(l));this.cacheUrl=window.location.href;}}},stateSame:function(i,j){if(!_.isUndefined(i)&&i!==null&&_.isEqual(i.tableFormParam,j.tableFormParam)&&i.url===j.url){return true;}else{return false;}},uniqueId:function(){return(new Date).getTime();},sendRequest:function(i,j){var k=this;f(this).ajaxhandler({url:i,type:"GET",beforeSend:k.u.beforeSendHandler("historyRequest",k.u),success:function(m,n,o,l){k.u.refreshContent(m);k.u.checkForFilter();if(typeof j==="undefined"||j===null){k.u.loadNavCount(i,false);}else{f(jq(k.u.conf.navTotalTopId)).text(j);f(jq(k.u.conf.navTotalBottomId)).text(j);}},error:function(n,p,o){if(n.statusText!=="abort"){var l=ajaxResponseHandlers.defhandler.parse(n.responseText);var m="";jQuery.each(l.errors,function(r,q){if(_.isUndefined(q.param)){m=flashMessage.getAsFlash("error",q.message);}});flashMessage.show(m);}},complete:k.u.onComplete(k.u)});}});return h;}();var e=function(h,i){if(_.isUndefined(i)){return"["+h+"]";}else{return"["+h+'="'+i+'"]';}};var a=function(){return{tableResponseContainer:"data-cb-flt-ajax-container",tblOptFormKey:"data-cb-table-option-form",tblOptEleKey:"data-cb-table-option-element",viewFormKey:"data-cb-view-form",viewSelectKey:"data-cb-view-select",fltContainerKey:"data-cb-flt-container",fltHiddenKey:"data-cb-flt-hidden",fltFormKey:"data-cb-flt-form",fltCloseKey:"data-cb-flt-close",fltOpenKey:"data-cb-view-flt-open",advFiltersConf:typeof adv_filters!=="undefined"?adv_filters:{},fltDataType:CBAdvFilterDtypes,fltDateFmt:typeof cbTimeFltDtFmt!=="undefined"?cbTimeFltDtFmt:"",fltValidator:typeof filterformValidator!=="undefined"?filterformValidator:{},historyEnabled:true,navLinkKey:"data-cb-nav-link",navTotalTopId:"cb-nav-total-count-top",navTotalBottomId:"cb-nav-total-count-bottom",chkAllKey:"data-cb-table-chk",chkChildKey:"data-cb-table-chk-child",tblPanelBodyKey:"data-cb-panel-body",tblPanelSelKey:"data-cb-panel-sel-all",tblPanelSelTotalKey:"data-cb-panel-sel-total",tblDateCol:"data-cb-table-standard-date",tblLoadingId:"cb-new-table-loading",tblHelpTxtId:"cb-new-table-help-text",summaryKey:"data-cb-load-summary",rowIndex:"data-cb-row-index",uniqueKey:"data-cb-uniqueKey",templateId:"data-cb-templateId",colIndex:"data-cb-col-index",bindSummaryToContent:"data-cb-bind-content",localSummaryToContent:false};};var d=function(){var i="sub_detail_fetched",j="link_additional_details";function h(o,l,n,k,m){this.u=l;this.key=m;this.baseData=n;this.$container=o;var p=this;f(document).mousemove(function(q){p.mouseTarget=q.target;});if(k){p.initializeLocal();}else{p.initializeRemote();}}f.extend(h.prototype,{initializeRemote:function(){var l=this;var k=this.$container.find(e(this.u.conf.summaryKey,this.key));if(k.length>0){this.id=f(k[0]).attr(this.u.conf.uniqueKey);this.templateId=f(k[0]).attr(this.u.conf.templateId);this.bindToContent=f(k[0]).attr(this.u.conf.bindSummaryToContent)==="true";if(this.bindToContent){k=this.$container.find("dd").has(e(this.u.conf.summaryKey,this.key));}k.hoverIntent({sensitivity:7,interval:100,over:function(){if(l.bindToContent){f(this).has(e(l.u.conf.summaryKey,l.key)).length>0?l.showSummary(f(this).find(e(l.u.conf.summaryKey,l.key))):void 0;}else{l.showSummary(this);}},timeout:200,out:function(){if(l.bindToContent){f(this).has(e(l.u.conf.summaryKey,l.key)).length>0?l.hideSummary(f(this).find(e(l.u.conf.summaryKey,l.key))):void 0;}else{l.hideSummary(this);}}});}},initializeLocal:function(){var l=this;var k=this.$container.find(e(this.u.conf.summaryKey,"local"));if(k.length>0){if(this.u.conf.localSummaryToContent){k=this.$container.find("dd").has(e(this.u.conf.summaryKey,"local"));}k.hoverIntent({sensitivity:7,interval:100,over:function(){if(l.u.conf.localSummaryToContent){f(this).has(e(l.u.conf.summaryKey,"local")).length>0?l.showLocalSummary(f(this).find(e(l.u.conf.summaryKey,"local"))):void 0;}else{l.showLocalSummary(this);}},timeout:200,out:function(){if(l.u.conf.localSummaryToContent){f(this).has(e(l.u.conf.summaryKey,"local")).length>0?l.hideSummary(f(this).find(e(l.u.conf.summaryKey,"local"))):void 0;}else{l.hideSummary(this);}}});}},showLocalSummary:function(n){var k,m="right";if(this.$container.find(".popover").length>0){f(".popover").hide();}var l=this;k=f(n).parents(e(this.u.conf.colIndex)).attr(this.u.conf.colIndex);if(parseInt(k)===3){m="left";}f(n).popover({container:this.$container,placement:m,trigger:"manual",html:true,content:function(){return f(n).parents(e(l.u.conf.rowIndex)).find('div[data-cb-popover="local"]').html();}});f(n).popover("show");f(".popover").off("mouseleave").on("mouseleave",function(){f(n).popover("hide");});f(".popover-content").off("dblclick").on("dblclick",function(){c(this);});},showSummary:function(o){if(this.$container.find(".popover").length>0){f(".popover").hide();}var n,m,k,l="right";k=f(o).parents(e(this.u.conf.colIndex)).attr(this.u.conf.colIndex);if(parseInt(k)===3){l="left";}f(o).popover({container:this.$container,placement:l,trigger:"manual",html:true});f(o).popover("show");n=f(o).parents(e(this.u.conf.rowIndex)).attr(this.u.conf.rowIndex);m=this.baseData[n];f(".popover").off("mouseleave").on("mouseleave",function(){f(o).popover("hide");});if(m.hasOwnProperty(i)&&m[i]){f(o).attr("data-content",Mustache.render(f(jq(this.templateId)).html(),m.data)).popover("show");f(".popover").focus();}else{if(m.hasOwnProperty(j)&&(!m.hasOwnProperty("requested")||m.requested)){m.requested=true;this.sendAdditionalReq(m[j],{triggerEl:o});}else{this.hideSummary(o);}}},hideSummary:function(l){var k=this;setTimeout(function(){var m=f(".popover");var n=true;if(m.length>0){n=m.has(k.mouseTarget).length>0&&m.html().indexOf(f(k.mouseTarget).html())!==-1?false:true;}if(n){f(l).popover("hide");}},150);},updateData:function(l){for(var k=0;k<this.baseData.length;k++){if(this.baseData[k][this.id]===l[this.id]){this.baseData[k]["data"]=l;this.baseData[k][i]=true;break;}}},sendAdditionalReq:function(l,k){var m=this;k.success=function(n){m.updateData(n);m.showSummary(k.triggerEl);};k.error=function(n){f(k.triggerEl).popover("hide");};k.cache=false;f.ajax(l,k);}});return h;}();function c(i){var k=document,l=i,h,j;if(k.body.createTextRange){h=document.body.createTextRange();h.moveToElementText(l);h.select();}else{if(window.getSelection){j=window.getSelection();h=document.createRange();h.selectNodeContents(l);j.removeAllRanges();j.addRange(h);}}}f(document).ready(function(){window.cbFilterUtilObj=new g();f('[data-cb-view-select="view-select"]').select2({dropdownCssClass:"cb-view-selector-mask",dropdownAutoWidth:true,formatSelection:function(i,h){return'<b id="select-result">'+Select2.util.escapeMarkup(i.text)+"</b>";}});});})(window.jQuery);
/*/assets/lib/javascripts/uri.js*/
function parseURL(c){var b=document.createElement("a");b.href=c;return{source:c,protocol:b.protocol.replace(":",""),host:b.hostname,port:b.port,query:b.search,params:(function(){var e={},d=b.search.replace(/^\?/,"").split("&"),a=d.length,f=0,g;for(;f<a;f++){if(!d[f]){continue;}g=d[f].split("=");e[g[0]]=g[1];}return e;})(),file:(b.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:b.hash.replace("#",""),path:b.pathname.replace(/^([^\/])/,"/$1"),relative:(b.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:b.pathname.replace(/^\//,"").split("/")};}
/*/assets/app/javascripts/custom-validations.js*/
formValidation.validators.validateRange=function(d,b){var e="yyyy-MM-dd";var f=$(jq(b.from));var c=null;if(f.val()!=""){c=Date.parseExact(f.val(),e);}var a=null;if(d.val()!=""){a=Date.parse(d.val(),e);}if(c!=null&&a!=null&&c.compareTo(a)>0){return b.message;}};formValidation.validators.local.confirmPassword=function(b,a){var c=$(jq(a.pwd));if(c.val()!=b.val()){return a.message;}};formValidation.validators.remote.is_account_registered=function(c,a){var b=formValidation.validators.local.presence(c,a);var d=formValidation.validators.local.email(c,a);if(b&&a.allow_blank===true){return;}else{if(b){return b;}else{if(d){return d;}else{var e={};e.email_address=$(c).val();jQuery.ajax({url:"/users/is_account_registered",data:e,beforeSend:function(){$(c).trigger("element:validate:clear");$("#cb-alert-registration-fields").show();$("#cb-alert-registration").hide();$("#users_login_submit").find('input[type="submit"]').removeAttr("disabled");},success:function(f){if(f.is_registered===false){$("#cb-alert-registration-fields").hide();$("#cb-alert-registration").show();$("#users_login_submit").find('input[type="submit"]').attr("disabled","true");}}});}}}};
/*/assets/app/javascripts/filter_datatypes.js*/
var CBAdvFilterDtypes={dt_mul:[{cond:"includes",disp_name:"includes",restrict:false,input:"multi_select"},{cond:"does_not_include",disp_name:"does not include",restrict:true,input:"multi_select"},{cond:"contains_only",disp_name:"contains only",restrict:true,input:"multi_select"},{cond:"empty",disp_name:"is not present",restrict:false},{cond:"not_empty",disp_name:"is present",restrict:false}],dt_mul_notnull:[{cond:"includes",disp_name:"includes",restrict:false,input:"multi_select"},{cond:"does_not_include",disp_name:"does not include",restrict:true,input:"multi_select"},{cond:"contains_only",disp_name:"contains only",restrict:true,input:"multi_select"}],dt_date:[{cond:"between",disp_name:"between",restrict:false,input:"between",group_header:"Absolute"},{cond:"after",disp_name:"is after",restrict:false,input:"after",group_header:"Absolute"},{cond:"before",disp_name:"is before",restrict:false,input:"before",group_header:"Absolute"},{cond:"empty",disp_name:"is not present",restrict:false,group_header:"Absolute"},{cond:"not_empty",disp_name:"is present",restrict:false,group_header:"Absolute"}],dt_date_time:[{cond:"between",disp_name:"between",restrict:false,input:"between",group_header:"Absolute"},{cond:"after",disp_name:"is after",restrict:false,input:"after",group_header:"Absolute"},{cond:"before",disp_name:"is before",restrict:false,input:"before",group_header:"Absolute"},{cond:"empty",disp_name:"is not present",restrict:false,group_header:"Absolute"},{cond:"not_empty",disp_name:"is present",restrict:false,group_header:"Absolute"}],dt_list:[{cond:"is",disp_name:"is",restrict:false,input:"list"},{cond:"is_not",disp_name:"is not",restrict:true,input:"list"},{cond:"empty",disp_name:"is not present",restrict:false},{cond:"not_empty",disp_name:"is present",restrict:false}],dt_mul_sel:[{cond:"includes",disp_name:"includes",restrict:false,input:"multi_select"},{cond:"does_not_include",disp_name:"does not include",restrict:true,input:"multi_select"},{cond:"is",disp_name:"is",restrict:false,input:"list"},{cond:"is_not",disp_name:"is not",restrict:true,input:"list"},{cond:"empty",disp_name:"is not present",restrict:false},{cond:"not_empty",disp_name:"is present",restrict:false}],dt_string:[{cond:"contains",disp_name:"contains",restrict:false,input:"cb_text"},{cond:"not_contains",disp_name:"does not contain",restrict:true,input:"cb_text"},{cond:"equals",disp_name:"equals",restrict:false,input:"cb_text"},{cond:"not_equals",disp_name:"not equal to",restrict:true,input:"cb_text"},{cond:"starts_with",disp_name:"starts with",restrict:false,input:"cb_text"},{cond:"empty",disp_name:"is not present",restrict:false},{cond:"not_empty",disp_name:"is present",restrict:false}],dt_integer:[{cond:"equals",disp_name:"equals",restrict:false,input:"cb_text"},{cond:"less_than",disp_name:"less than",restrict:false,input:"cb_text"},{cond:"less_than_equal",disp_name:"less than or equal",restrict:false,input:"cb_text"},{cond:"greater_than",disp_name:"greater than",restrict:false,input:"cb_text"},{cond:"greater_than_equal",disp_name:"greater than or equal",restrict:false,input:"cb_text"},{cond:"empty",disp_name:"is not present",restrict:false},{cond:"not_empty",disp_name:"is present",restrict:false}],dt_double:[{cond:"equals",disp_name:"equals",restrict:false,input:"cb_text"},{cond:"less_than",disp_name:"less than",restrict:false,input:"cb_text"},{cond:"less_than_equal",disp_name:"less than or equal",restrict:false,input:"cb_text"},{cond:"greater_than",disp_name:"greater than",restrict:false,input:"cb_text"},{cond:"greater_than_equal",disp_name:"greater than or equal",restrict:false,input:"cb_text"},{cond:"empty",disp_name:"is not present",restrict:false},{cond:"not_empty",disp_name:"is present",restrict:false}],dt_money:[{cond:"equals",disp_name:"equals",restrict:false,input:"cb_text"},{cond:"less_than",disp_name:"less than",restrict:false,input:"cb_text"},{cond:"less_than_equal",disp_name:"less than or equal",restrict:false,input:"cb_text"},{cond:"greater_than",disp_name:"greater than",restrict:false,input:"cb_text"},{cond:"greater_than_equal",disp_name:"greater than or equal",restrict:false,input:"cb_text"},{cond:"empty",disp_name:"is not present",restrict:false},{cond:"not_empty",disp_name:"is present",restrict:false}],dt_date_notnull:[{cond:"between",disp_name:"between",restrict:false,input:"between",group_header:"Absolute"},{cond:"after",disp_name:"is after",restrict:false,input:"after",group_header:"Absolute"},{cond:"before",disp_name:"is before",restrict:false,input:"before",group_header:"Absolute"}],dt_date_time_notnull:[{cond:"between",disp_name:"between",restrict:false,input:"between",group_header:"Absolute"},{cond:"after",disp_name:"is after",restrict:false,input:"after",group_header:"Absolute"},{cond:"before",disp_name:"is before",restrict:false,input:"before",group_header:"Absolute"}],dt_list_notnull:[{cond:"is",disp_name:"is",restrict:false,input:"list"},{cond:"is_not",disp_name:"is not",restrict:true,input:"list"}],dt_mul_sel_nullable:[{cond:"includes",disp_name:"includes",restrict:false,input:"multi_select"},{cond:"does_not_include",disp_name:"does not include",restrict:true,input:"multi_select"},{cond:"is",disp_name:"is",restrict:false,input:"list"},{cond:"is_not",disp_name:"is not",restrict:true,input:"list"}],dt_string_notnull:[{cond:"contains",disp_name:"contains",restrict:false,input:"cb_text"},{cond:"not_contains",disp_name:"does not contain",restrict:true,input:"cb_text"},{cond:"equals",disp_name:"equals",restrict:false,input:"cb_text"},{cond:"not_equals",disp_name:"not equal to",restrict:true,input:"cb_text"},{cond:"starts_with",disp_name:"starts with",restrict:false,input:"cb_text"}],dt_integer_notnull:[{cond:"equals",disp_name:"equals",restrict:false,input:"cb_text"},{cond:"less_than",disp_name:"less than",restrict:false,input:"cb_text"},{cond:"less_than_equal",disp_name:"less than or equal",restrict:false,input:"cb_text"},{cond:"greater_than",disp_name:"greater than",restrict:false,input:"cb_text"},{cond:"greater_than_equal",disp_name:"greater than or equal",restrict:false,input:"cb_text"}],dt_double_notnull:[{cond:"equals",disp_name:"equals",restrict:false,input:"cb_text"},{cond:"less_than",disp_name:"less than",restrict:false,input:"cb_text"},{cond:"less_than_equal",disp_name:"less than or equal",restrict:false,input:"cb_text"},{cond:"greater_than",disp_name:"greater than",restrict:false,input:"cb_text"},{cond:"greater_than_equal",disp_name:"greater than or equal",restrict:false,input:"cb_text"}],dt_money_notnull:[{cond:"equals",disp_name:"equals",restrict:false,input:"cb_text"},{cond:"less_than",disp_name:"less than",restrict:false,input:"cb_text"},{cond:"less_than_equal",disp_name:"less than or equal",restrict:false,input:"cb_text"},{cond:"greater_than",disp_name:"greater than",restrict:false,input:"cb_text"},{cond:"greater_than_equal",disp_name:"greater than or equal",restrict:false,input:"cb_text"}],dt_string_equals:[{cond:"equals",disp_name:"equals",restrict:false,input:"cb_text"}],dt_string_equals_contains:[{cond:"equals",disp_name:"equals",restrict:false,input:"cb_text"},{cond:"contains",disp_name:"contains",restrict:false,input:"cb_text"}],dt_isnull_present:[{cond:"empty",disp_name:"is not present",restrict:false},{cond:"not_empty",disp_name:"is present",restrict:false}]};
/*/assets/app/javascripts/cb-component.js*/
$(document).ready(function(){$(".cn-js--disable").removeClass("cn-js--disable");});$(document).on("click","[data-password-toggle]=true",function(){var a=$(this).data("passwordToggle");(!_.isUndefined(a))&&a?passwordToggle.hide(this):passwordToggle.show(this);});var passwordToggle={toggleId:null,toggleAttrKey:"passwordToggle_id",show:function(b){var c=$(jq($(b).attr("data-password-param")));c[0].type="text";$(b).text("Hide");var a=this;$(b).data("passwordToggle",true);toggleId=setTimeout(function(){a.hide(b);},20000);$(b).data(this.toggleAttrKey,toggleId);},hide:function(a){var b=$(jq($(a).attr("data-password-param")));if(!_.isNull($(a).data(this.toggleAttrKey))){clearTimeout($(a).data(this.toggleAttrKey));$(a).data(this.toggleAttrKey,null);}b[0].type="password";$(a).text("Show");$(a).data("passwordToggle",false);}};var addDefaultDate=function(a){a=a||{};if(window.siteTimeMillis){a.defaultDate=new Date(siteTimeMillis);}return a;};var dateBinding=function(){$('[data-datepicker]="true"').filter(":input").css("cursor","pointer").datepicker(addDefaultDate({dateFormat:"yy-mm-dd",beforeShow:function(){$("#ui-datepicker-div").addClass("cn-datepicker");}}));$('[data-datetimepicker]="true"').filter(":input").each(function(b,a){var c=$(a).data();c=$.extend({controlType:"spinner",showSecond:true,dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss",useLocalTimezone:false,defaultTimezone:"+0000",beforeShow:function(e,d,g){$("#ui-datepicker-div").addClass("cn-datepicker");var h=$(e).attr("data-date-disabled");if(typeof h!="undefined"&&h=="true"){if(/^\s*$/.test($(e).val()||"")){var f=new Date();f.setMinutes(f.getMinutes()+f.getTimezoneOffset());if(window.siteTimeMillis){f=new Date(siteTimeMillis);}g.hour=f.getHours();g.minute=f.getMinutes();g.second=f.getSeconds();}}}},c);$(a).css("cursor","pointer").datetimepicker(addDefaultDate(c));});};var formGroup=function(){$("body").on("focus",".cn-form__group .cn-form__control",function(){var a=$(this).closest(".cn-form__field")[0];$(a).addClass("cn-form__field--focus");});$("body").on("focusout",".cn-form__group .cn-form__control",function(){var a=$(this).closest(".cn-form__field")[0];$(a).removeClass("cn-form__field--focus");});};var toolBarHandler=(function(){var k;var g=function(){if(window.getSelection){sel=window.getSelection();if(sel.getRangeAt&&sel.rangeCount){k=sel.getRangeAt(0);}}else{if(document.selection&&document.selection.createRange){k=document.selection.createRange();}}return k;};var c=function(n){if(n){if(window.getSelection){sel=window.getSelection();sel.removeAllRanges();sel.addRange(n);}else{if(document.selection&&n.select){n.select();}}}};var d=function(o){var s=o.ownerDocument||o.document;var r=s.defaultView||s.parentWindow;var p;if(typeof r.getSelection!="undefined"){p=r.getSelection();if(p.rangeCount>0){range=r.getSelection().getRangeAt(0);var n=range.cloneRange();try{n.setStart(n.startContainer,n.startOffset-1);}catch(q){}rect=n.getBoundingClientRect();if(p&&p.toString().length>1){g();}}}};var b=function(o){var n=o.target;d(n);};var f=function(n){document.execCommand(n);g();};var f=function(o,n,p){document.execCommand(o,n,p);g();};var a=function(r){var n,o;if(window.getSelection()&&window.getSelection().anchorNode){n=window.getSelection().anchorNode.parentElement;}var t=$(r).attr("data-toolbar-item");var p=$(r).closest('[data-toolbar="true"]');$(p).find("[data-toolbar-item]").hide();$(p).find('[data-toolbar-action="'+t+'"]').show();var q=document.querySelectorAll("#cn-conf__tools")[0];var s=document.querySelectorAll("#cn-formatting-toolbar")[0];if(s){s.style.top=POSITION.top-q.getBoundingClientRect().top-s.offsetHeight-15+"px";s.style.left=POSITION.left-q.getBoundingClientRect().left-(POSITION.width/2)-(s.offsetWidth/2)+"px";}o=$(r).closest('[data-toolbar="true"]').find('[data-toolbar-url-control="true"]');o.focus();$(o).val("");if(n&&"A"==n.tagName){$(o).val(n.getAttribute("href"));}$(p).find("[edit-content-for]").attr("contenteditable","false");};var j=function(o){var r=window.getSelection();var p=[];p=r.getRangeAt(0);var q=r.anchorNode;var n=r.focusNode;p.setStart(q,0);p.setEnd(n,o);r.addRange(p);g();};var m=function(n){$(n).hide();$(n).closest('[data-toolbar="true"]').find("[data-toolbar-item]").show();};var i=function(q){var p=$(q).closest('[data-toolbar="true"]');$(p).find("[edit-content-for]").attr("contenteditable","true");var o=k;c(o);var r,n;m(q);r=$(q).find('[data-toolbar-url-control="true"]')[0];var s="";if(window.getSelection()&&window.getSelection().anchorNode){n=window.getSelection().anchorNode.parentElement;}if(n&&"A"==n.tagName){j(n.textContent.length);o=k;c(o);}if(r.value!=""){s=r.value;f(TOOLBAR_ICONS.createLink,false,s);n=window.getSelection().anchorNode.parentElement;$(n).attr("href",s);}r.value="";};var l=function(){c(k);f(TOOLBAR_ICONS.unlink);var n=$('[data-toolbar="true"]').find('[data-toolbar-url-control="true"]');$(n).val("");};var e=function(o){o=o.firstChild;k=document.createRange();k.setStart(o,0);k.setEnd(o,o.data.length);var n=window.getSelection();if(window.getSelection){if(window.getSelection().empty){window.getSelection().empty();}else{if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges();}}}else{if(document.selection){document.selection.empty();}}n.addRange(k);};var h=function(n){c(k);var o=n.getAttribute("data-toolbar-item");switch(o){case"formatBlock":f(o,false,"<"+n.getAttribute("data-toolbar-action-value")+">");break;case"bold":case"italic":case"underline":f(o);break;case"createLink":a(n);break;default:f(o);break;}};return{formatSelectedText:h,removeLinkTag:l,showCaretPosition:b,hideUrlInput:i,hideField:m,changeSelection:e};})();$.fn.cbToolBar=function(){var a=$(this);$(a).find("[data-toolbar-item]").each(function(){$(this).click(function(){toolBarHandler.formatSelectedText(this);});});$(a).find("[edit-content-for]").on("mouseup",function(b){toolBarHandler.showCaretPosition(b);});$(a).find("[edit-content-for]").on("keyup",function(b){toolBarHandler.showCaretPosition(b);});$(a).closest("[data-toolbar]").find("[data-toolbar-url-close]").click(function(b){toolBarHandler.removeLinkTag();toolBarHandler.hideUrlInput($(this).closest("[data-toolbar-action]"));});$(a).closest("[data-toolbar]").find('[data-toolbar-url-control="true"]').on("keypress",function(c){var b=(c.keyCode?c.keyCode:c.which);if(b==13){c.preventDefault();c.stopPropagation();toolBarHandler.hideUrlInput($(this).closest("[data-toolbar-action]"));}});$(a).find("[edit-content-for]").on("keypress focusout change",function(b){$(jq($(this).attr("edit-content-for"))).val($(this).html());});};$.fn.contextualSelect=function(){var o="data-for";var j="data-active";var f="data-contextual-content";var e="data-contextual-item-val";var a="data-contextual-title";var b="data-contextual-label";var m="data-collapse";var i="data-collapse";var h={show:function(){$(dA(f,c+"-content")).slideDown();}};var c=$(this).attr("data-contextual-id");var g=$(this).find('input[type="hidden"]');var d=$(g).val();var k=$(this).attr("data-onchange-handler");k=_.isString(k)?window[k]:k;if(_.isFunction(k)){$(g).change(function(q){k(q);});}$(g).trigger("change");if(!d){}else{var p=$(dA(e,d));var n=p.attr(a);$(dA(b,p.attr(o))).html(n);p.attr(j,"true");}if($(this).attr(m)==="false"){h.show();}$(this).on("click",function(){h.show();});var l=this;$(this).closest(".cn-choose").on("click",'[data-contextual-item="true"]',function(){var r=$(this).attr(o);$(dA(o,c)).removeAttr(j);$(this).attr(j,"true");var q=$(this).attr(a);$(dA(b,r)).html(q);$(jq(r)).val($(this).attr(e)).trigger("change");if($(this).attr(i)==="true"){$(dA(f,r+"-content")).slideUp();}});};var dA=function(a,b){return"["+a+'="'+b+'"]';};var bindComponentEvents=function(){if($('[data-contextual="true"]').length>0){$('[data-contextual="true"]').each(function(){if(!$(this).data().contextualAttached){$(this).contextualSelect();$(this).data("contextual-attached",true);}});}$('[data-select-country="true"]').cbSearchList(function(a){});dateBinding();formGroup();$('[data-menu="true"]').each(function(){$(this).cbMenu();});bindAccordion();$('[data-toolbar="true"]').each(function(){$(this).cbToolBar();});};$(document).ready(function(){bindComponentEvents();});var cbSwitchHandler=function(f,c,b,a){var h=$(c).attr("data-onchange-handler");h=_.isString(h)?window[h]:h;if(!_.isFunction(h)){f.preventDefault();return;}var g=$.Deferred();f.checked=$(c).checked;g.resolve=b;g.reject=a;h(f,g);$.when(g.promise()).then(b,a);};$(document).on("change","[data-switch=true]",function(b){var a=this;cbSwitchHandler(b,this,function(){$(a).attr("checked","checked");},function(){$(a).removeAttr("checked");});b.preventDefault();});$(document).on("change",'[data-modal-switch="true"]',function(b){var a=this;cbSwitchHandler(b,this,function(){var c=$(jq($(a).data("modalId")));$(c).trigger("click");},function(){});if($(a).attr("checked")){$(a).removeAttr("checked");}else{$(a).attr("checked","checked");}b.preventDefault();});$(document).ready(function(){$('[data-modal-switch="true"]').each(function(){var b=$(jq($(this).data("modalId")));CBModalSwitch.getAjaxEvent(b);});});var CbSwitch={dfltSuccess:function(b,e,f,a,d){var c=$(jq(d));if(b.switchON===false){c.removeAttr("checked");}else{if(b.switchON===true){c.attr("checked","checked");}}flashMessage.show(flashMessage.get(b.flash));if(typeof b.forward!=="undefined"){window.location.replace(b.forward);}}};var CBModalSwitch={getAjaxEvent:function(b){if($(b).data("ajaxEvent")!=="modal_switch_handler"){return;}var c=$.extend({},ajaxResponseHandlers.formhandler,{success:function(e,f,g,d){CbSwitch.dfltSuccess(e,f,g,d,$(b).data("switchId"));}});var a=$(b).attr("id").replace("-","_")+"_ajax_event";ajaxResponseHandlers[a]=c;$(b).data("ajaxEvent",a);}};$.fn.cbMenu=function(){var a=$(this);a.find('[data-menu-label="true"]').on("click",function(b){a.find('[data-menu-container="true"]').fadeIn(200);a.addClass("cn-menu--active");});$(document).click(function(b){if($(a).has(b.target).length===0||a.find('[data-menu-list="true"]').has(b.target).length!==0){a.find('[data-menu-container="true"]').fadeOut(200);a.removeClass("cn-menu--active");}});};var sbList={keys:{menuId:"data-menu-id",sblDataListSource:"data-sbl-item-list",sblDataBlockList:"data-sbl-black-list",sblDataAdditionalMaping:"data-sbl-additional-mapping",sblListItemTmplId:"data-sbl-list-item-tmpl",sblDataListContainer:"data-sbl-list-container",sblDataSTBox:"data-sbl-search-box",sblHideSTBox:"data-sbl-hide-search",sblDataHeader:"data-menu-header",sblDataListItemVal:"data-sbl-item-val",sblDataList:"data-sbl-list",sblDataListItemValS:"[data-sbl-item-val]",sblDataListContainerS:"[data-sbl-list-container]",sblDataHeaderFS:'[data-menu-header="true"]',sblDataSTBoxFS:'[data-sbl-search-box="txt"]',sblDataListFC:'[data-sbl-list="true"]'},cls:{menu:"cn-menu",menuActive:"cn-menu--active",menuDisabled:"cn-menu--disabled",menuDynamic:"cn-menu--dynamic",menuContent:"cn-menu__content",menuItem:"cn-menu__item",menuItemActive:"cn-menu__item--active",menuC:".cn-menu",menuActiveC:".cn-menu--active",menuDynamicC:".cn-menu--dynamic",menuContentC:".cn-menu__content",menuItemC:".cn-menu__item",menuItemActiveC:".cn-menu__item--active"}};(function(c){var a=(function(){function d(i,j){this.$el=i;this.id=i.attr(sbList.keys.menuId);this.dataSource=window[i.attr(sbList.keys.sblDataListSource)];this.blackList=window[i.attr(sbList.keys.sblDataBlockList)];this.extraMapping=window[i.attr(sbList.keys.sblDataAdditionalMaping)];this.callback=j;this.disableIfNeeded();}c.extend(d.prototype,{disableIfNeeded:function(){if(!this.hasOptions()){this.$el.addClass(sbList.cls.menuDisabled);}else{this.$el.removeClass(sbList.cls.menuDisabled);}},init:function(){var i=this;this.itemHtml=g;var k=c(this.$el).attr(sbList.keys.sblListItemTmplId);if(typeof k!=="undefined"&&k!==""){this.itemHtml=c(jq(k)).html();}var j=Mustache.render(h,{id:this.id});c(this.$el).closest(sbList.cls.menuC).find(sbList.keys.sblDataListContainerS).remove();c(this.$el).closest(sbList.cls.menuC).append(j);this.addList(null);if(!_.isUndefined(this.$el.attr("data-position-right"))&&this.$el.attr("data-position-right")==="false"){c(jq(this.id)).find(sbList.keys.sblDataListContainerS).css("right","initial");}this.$el.on("click",function(p){if(c(this).closest(sbList.cls.menuC).hasClass(sbList.cls.menuActive)){return;}c(this).closest(sbList.cls.menuC).addClass(sbList.cls.menuActive);var n=c(jq(i.id)),o;c(sbList.keys.sblDataListContainerS).hide();n.find(sbList.keys.sblDataSTBoxFS).val("");i.addList(n.find(sbList.keys.sblDataSTBoxFS).val());n.find(sbList.keys.sblDataListContainerS).show().css("visibility","hidden");var m=n.find(sbList.keys.sblDataListContainerS).find(sbList.cls.menuItemC);if(m.length!==0){if(m.length<6){o=m[m.length-1];}else{o=m[5];}if(!(c(o).isOnScreen())){n.find(sbList.cls.menuC).addClass(sbList.cls.menuDynamic);}else{n.find(sbList.cls.menuC).removeClass(sbList.cls.menuDynamic);}}if(c(i.$el).attr(sbList.keys.sblHideSTBox)==="true"){n.find(sbList.keys.sblDataHeaderFS).hide();}n.find(sbList.keys.sblDataListContainerS).hide().css("visibility","visible");n.find(sbList.keys.sblDataListContainerS).fadeIn(200,function(){n.find(sbList.keys.sblDataSTBoxFS).focus();});c(sbList.keys.sblDataListContainerS).find(sbList.cls.menuItemActiveC).removeClass(sbList.cls.menuItemActive);});this.$el.on("list:hide",function(m){c(jq(i.id)).find(sbList.keys.sblDataListContainerS).fadeOut(200);c(jq(i.id)).find(sbList.cls.menuC).removeClass(sbList.cls.menuActive);});var l=null;c(jq(this.id)).on("keyup paste",sbList.keys.sblDataSTBoxFS,function(n){if(n.which===40||n.which===38||n.which===13){return;}var m=this;l&&clearTimeout(l);l=setTimeout(function(){i.addList(c(m).val());},50);});c(jq(this.id)).on("click",sbList.keys.sblDataListItemValS,function(n){var m=c(this).attr(sbList.keys.sblDataListItemVal);i.$el.attr("data-value",m);i.$el.trigger("list:click");if(!_.isUndefined(i.callback)&&_.isFunction(i.callback)){n.cbselectedVal=m;i.callback.call(i.$el[0],n);}});c(document).click(function(m){if((c(jq(i.id)).has(m.target).length===0&&i.$el.has(m.target).length===0)){c(jq(i.id)).find(sbList.keys.sblDataListContainerS).fadeOut(200);c(jq(i.id)).find(sbList.cls.menuC).removeClass(sbList.cls.menuActive);}});},addList:function(i){c(jq(this.id)).find('[data-sbl-content="true"]').empty();if(_.isArray(this.dataSource)){this.addOption(i,this.dataSource);}else{for(var j in this.dataSource){this.addOption(i,this.dataSource[j],j);}}},addOption:function(n,o,q){var k=[];if(n===null||c.trim(n)===""){for(var m=0;m<o.length;m++){if(!_.isUndefined(this.blackList)&&_.contains(this.blackList,o[m].value)){continue;}k.push(Mustache.render(this.itemHtml,o[m]));}}else{for(var m=0;m<o.length;m++){if(!_.isUndefined(this.blackList)&&_.contains(this.blackList,o[m].value)){continue;}if(o[m].disp.toLowerCase().includes(n.toLowerCase())){k.push(Mustache.render(this.itemHtml,o[m]));}else{if(!_.isUndefined(this.extraMapping)&&this.isApplicable(n,o[m])){k.push(Mustache.render(this.itemHtml,o[m]));}}}}if(k.length!==0){var j=c(e);c(jq(this.id)).find('[data-sbl-content="true"]').append(j);if(typeof q!=="undefined"&&q!==""){c(j).find('[data-sbl-list-heading="true"]').text(q);}c(j).append(k.join(" "));if(c(jq(this.id)).find('[data-menu="true"]').hasClass("cn-menu--filter")&&k.length>4){var p=c(f);p.html("<span>"+(k.length-4)+' more</span><i class="cn-glyph-unfold-more-horizontal cn-glyph--sm cn-glyph--lhi"><i>');c(j).append(p);}}},isApplicable:function(k,l){for(var j in this.extraMapping){if(j.toLowerCase().startsWith(k.toLowerCase())&&this.extraMapping[j]===l.value){return true;}}return false;},hasOptions:function(){if((_.isUndefined(this.blackList)||this.blackList.length==0)&&(!_.isUndefined(this.dataSource)&&this.dataSource.length>0)){return true;}if(_.isArray(this.dataSource)){return this.listHasOptions(this.dataSource);}else{for(var j in this.dataSource){var i=this.listHasOptions(this.dataSource[j]);if(i){return i;}}return false;}},listHasOptions:function(l){var j=false;for(var k=0;k<l.length;k++){if(!_.isUndefined(this.blackList)&&_.contains(this.blackList,l[k].value)){continue;}j=true;}return j;}});var g='<div class="cn-menu__item" data-sbl-item-val="{{value}}"> <div class="{{class}}"></div>{{disp}}</div>';var h='<div class="cn-menu__container" style="display:none;" data-sbl-list-container="true" id="{{id}}-search-container"><div class="cn-menu__main"><div class="cn-menu__header" data-menu-header="true"><input type="text" class="cn-menu__search" data-sbl-search-box="txt"></div><div class="cn-menu__content" data-sbl-content="true"></div></div></div>';var e='<div class="cn-menu__list" data-sbl-list="true"><div class="cn-menu__heading" data-sbl-list-heading="true"></div></div>';var f='<div class="cn-menu__filter" data-sbl-list-more="true"></div>';return d;})();c.fn.cbSearchList=function(d){if(typeof c(this)!=="undefined"&&c(this).length>0){c(this).each(function(){var e=new a(c(this),d);e.init();});}};c(document).on("click",'[data-sbl-list-more="true"]',function(){c(this).closest('[data-sbl-list="true"]').addClass("cn-menu__list--active");c(this).hide();});c.fn.isOnScreen=function(){var f=c(window);var d={top:f.scrollTop(),left:f.scrollLeft()};d.right=d.left+f.width();d.bottom=d.top+f.height();var e=this.offset();e.right=e.left+this.outerWidth();e.bottom=e.top+this.outerHeight();return(!(d.right<e.left||d.left>e.right||d.bottom<e.top||d.top>e.bottom));};var b={first:function(){return c(c(sbList.keys.sblDataListContainerS+":visible").find(sbList.cls.menuItemC)[0]);},last:function(){var d=c(sbList.keys.sblDataListContainerS+":visible").find(sbList.cls.menuItemC);return c(d[d.length-1]);},scroll:function(){var e=c(sbList.keys.sblDataListContainerS+":visible").find(sbList.cls.menuItemActiveC);var g=c(sbList.cls.menuContentC+":visible");if(e.length!==0){var f=e.offset().top+e.outerHeight(true);var d=g.offset().top+g.outerHeight(true);if(f>d){g.scrollTop(g.scrollTop()+(f-d));}var h=e.offset().top-g.offset().top;if(h<0){g.scrollTop(g.scrollTop()+h);}}}};(function(){c(document).ready(function(){c("body").on("mouseover",sbList.cls.menuItemC,function(){if(!(c(sbList.keys.sblDataListContainerS).is(":visible"))){return;}c(sbList.cls.menuItemC).removeClass(sbList.cls.menuItemActive);c(this).addClass(sbList.cls.menuItemActive);});c(document).keydown(function(i){if(!(c(sbList.keys.sblDataListContainerS).is(":visible"))){return;}c(sbList.keys.sblDataListContainerS+":visible").find(sbList.keys.sblDataSTBoxFS).focusout();switch(i.which){case 38:var h=c(sbList.keys.sblDataListContainerS+":visible").find(sbList.cls.menuItemActiveC);if(h.length===0){b.last().addClass(sbList.cls.menuItemActive);}else{var g=h.prev(sbList.cls.menuItemC);h.removeClass(sbList.cls.menuItemActive);g.addClass(sbList.cls.menuItemActive);if(g.length===0){b.last().addClass(sbList.cls.menuItemActive);}}break;case 40:var h=c(sbList.keys.sblDataListContainerS+":visible").find(sbList.cls.menuItemActiveC);if(h.length===0){b.first().addClass(sbList.cls.menuItemActive);}else{var f=h.next(sbList.cls.menuItemC);h.removeClass(sbList.cls.menuItemActive);f.addClass(sbList.cls.menuItemActive);if(f.length===0){b.first().addClass(sbList.cls.menuItemActive);}}break;case 13:var h=c(sbList.keys.sblDataListContainerS+":visible").find(sbList.cls.menuItemActiveC);h.trigger("click");break;case 27:var d=c(sbList.keys.sblDataListContainerS+":visible");d.hide();d.closest(sbList.cls.menuC).removeClass(sbList.cls.menuActive);break;default:return;}b.scroll();i.preventDefault();});});})();})(jQuery);$(document).ready(function(){$("[data-tab-item]").on("click",function(a){var c=$(this);var b=c.parents('[data-tab="true"]')[0];c.addClass("cn-tab__item--active").siblings("[data-tab-item]").removeClass("cn-tab__item--active");$(b).find("[data-tab-block="+c.data("tab-item")+"]").addClass("cn-tab__block--active").siblings("[data-tab-block]").removeClass("cn-tab__block--active");a.preventDefault();});});$(document).ready(function(){$("body").on("click","[data-tabc-item]",function(){$(this).addClass("cn-tabc__item--active").siblings("[data-tabc-item]").removeClass("cn-tabc__item--active");});});$.fn.cbAppNotification=function(d){d=d||{};var a=$(this).cbAppNotification.conf;$.extend(this,a,$(this).data(),d);if(this.classAddToBody){$("body").addClass(this.classAddToBody);}if($(this).is(":visible")){var c=$(this).outerHeight();if(this.classAddToBody){$("."+this.classAddToBody).css({"padding-top":c});}}var b=this;$(this).on("click",this.closeBtnSelector,function(g){var f=b.onClose;f=_.isString(f)?window[f]:f;if(_.isFunction(f)){f(g);}});};$.fn.cbAppNotification.conf={classAddToBody:"",closeBtnSelector:"",ajaxhandlerName:"",onClose:null};$(document).ready(function(){$(jq("cn-wrapper")).on("click","[data-toggle-label]",function(){if($(this).attr("data-toggle-state")==="on"){$(this).text($(this).attr("data-toggle-off"));var a=$(this).attr("data-toggle-class")?$(this).attr("data-toggle-class"):"cn-prevent__container";$(jq($(this).attr("data-table-id"))).removeClass(a);$(this).attr("data-toggle-state","off");}else{$(this).attr("data-toggle-state","on");$(this).text($(this).attr("data-toggle-on"));var a=$(this).attr("data-toggle-class")?$(this).attr("data-toggle-class"):"cn-prevent__container";$(jq($(this).attr("data-table-id"))).addClass(a);}});});var cbUpload={opt:{uploadHandler:"upload"},callUploadHandler:function(d,c){var b=$.extend({},cbUpload.opt,$(d).data());var a=_.isString(b.uploadHandler)?window[b.uploadHandler]:null;if(_.isFunction(a)){a(c);}}};$.fn.cbUpload=function(){var d;$(this).on("dragover",function(g){clearTimeout(d);$(this).find('[data-upload-box-file-holder="true"]').addClass("cn-upload--hovered");if(g.originalEvent){g=g.originalEvent;}if(!g.dataTransfer){return;}var f=g.dataTransfer.effectAllowed;if(!_.isUndefined(f)&&!_.isUndefined(g.dataTransfer.dropEffect)){g.dataTransfer.dropEffect=("move"===f||"linkMove"===f)?"move":"copy";}g.stopPropagation();g.preventDefault();return false;}).on("dragleave",function(){$(this).find('[data-upload-box-file-holder="true"]').removeClass("cn-upload--hovered");return false;}).on("dragenter",function(){$(this).find('[data-upload-box-file-holder="true"]').addClass("cn-upload--hovered");return false;}).on("drop",function(f){$(this).find('[data-upload-box-file-holder="true"]').removeClass("cn-upload--hovered");f.preventDefault();cbUpload.callUploadHandler(this,f.originalEvent.dataTransfer.files);});var c=$(this).attr("data-file-picker-id");$(this).find('[data-cb-file-picker="true"]').on("click",function(f){try{$(jq(c)).val("");$(jq(c)).click();}finally{f.preventDefault();}});var a=$(jq(c));var b=$(this).closest('[data-upload-box="true"]').attr("data-upload-handler");$(a).attr("data-upload-handler",b);$(jq(c)).on("change",function(f){cbUpload.callUploadHandler(this,f.target.files);});};$(document).ready(function(){$('[data-upload-box="true"]').each(function(){$(this).cbUpload();});$("[cb-upload]").each(function(){$(this).on("click",function(){var a=$(this).attr("cb-upload");$(jq(a)).show();$("body").addClass("cn-upload-opened");});});window.hideCbUpload=function(){$('[cb-upload-container="true"]').hide();$("body").removeClass("cn-upload-opened");};$("body").on("keyup",function(a){if(a.which==27&&$('[cb-upload-container="true"]').is(":visible")){hideCbUpload();}});$("body").on("click",function(a){if($('[cb-upload-container="true"]').is(":visible")&&$('[data-upload-box-file-holder="true"]').is(a.target)&&$('[data-upload-box-file-holder="true"]').has(a.target).length===0){hideCbUpload();}});});var contextual_help={keys:{main_container:"help-container",close:"data-help-close",back:"data-help-back",trigger:"data-help-link",qa_trigger:"data-help-link-qa",help_container:"data-help-id",header:"data-help-header"},help_hash:null,backStack:[],show:function(c,d){if(!$(".cn-help").hasClass("cn-help--active")){$(".cn-help").addClass("cn-help--active");}if(d){$(".cn-help").addClass("cn-help--affix");}else{$(".cn-help").removeClass("cn-help--affix");}var e=this.urlHash(c);var a=contextual_help.attSel(contextual_help.keys.help_container,e);contextual_help.help_hash=e;if(e===null||$(a).length<1){c=this.fileName(c);var b=this.contentName(c);c=contextual_help.cdn_prefix+c;contextual_help.getAppend(c,b);}else{this.showHelp();}},showHelp:function(){var b=contextual_help.keys;var c=contextual_help.attSel;if($(".cn-help").hasClass("cn-help--active")){var e=$(jq(b.main_container)).find(c(b.header,"true"));e.hide();e.show("slide",{direction:"right"},200);}var a=$(c(b.back)).attr(b.back);if(typeof a!=="undefined"&&a!==""){contextual_help.backStack.push(a);}$(c(b.back)).css("visibility","hidden");var d=contextual_help.help_hash;if(d&&d!=="null"){$(c(b.back)).attr(b.back,d);$(c(b.back,d)).css("visibility","visible");$(c(b.help_container,d)).hide();$(c(b.help_container)).removeClass("cn-help__content--current");$(c(b.help_container,d)).addClass("cn-help__content--current").show("slide",{direction:"right"},200);}contextual_help.help_hash=null;},getAppend:function(b,a){var d=window[a];if(d){contextual_help.appendData(d);return;}var c=$(document.createElement("script")).attr("src",b).attr("type","text/javascript");$("body").append(c);},appendData:function(d){var c={};c.sub=[];$.each(d,function(e,f){if(e==="main"){c.main=f;}else{f.id=e;f.has_qa=f.qas.length>0;c.sub.push(f);}});c.main.has_qa=c.main.qas.length>0;c.main.has_steps=c.main.steps&&c.main.steps.length>0;var a=$(jq("help-template")).html();var b=Mustache.to_html(a,c);$(jq(contextual_help.keys.main_container)).html(b);this.showHelp();},hide:function(){contextual_help.backStack=[];$(".cn-help").removeClass("cn-help--active");$("#"+contextual_help.keys.main_container).html("");},back:function(d){var b=contextual_help.keys;var c=contextual_help.attSel;$(c(b.help_container,$(d).attr(b.back))).hide("slide",{direction:"right"},200);$(c(b.back)).attr(b.back,"");var a=contextual_help.backStack.splice(contextual_help.backStack.length-1,1)[0];if(typeof a!=="undefined"&&a!==""){$(c(b.back)).attr(b.back,a);}else{$(c(b.back)).css("visibility","hidden");}},fileName:function(a){var b=a.indexOf("#")>-1?a.indexOf("#"):a.length;a=a.substring(0,b);a=a.match(".js$")?a:a+".js";return a===".js"?null:a;},contentName:function(a){a=a.replace("/","_");a=a.match(".js$")?a.substring(0,a.length-3):a;return a;},urlHash:function(a){return a.indexOf("#")>-1?a.substring(a.indexOf("#")+1,a.length):null;},attSel:function(a,b){return typeof b!=="undefined"&&b?"["+a+'="'+b+'"]':"["+a+"]";}};$(document).ready(function(){var a=contextual_help.keys;var b=contextual_help.attSel;$("body").on("click",b(a.close),function(){contextual_help.hide();});$("body").on("click",b(a.trigger,"true"),function(){if(typeof $(this).attr(a.qa_trigger)==="undefined"||!$(this).attr(a.qa_trigger)){$(b(a.back)).attr(a.back,"");contextual_help.backStack=[];}contextual_help.show($(this).attr("data-help-href"),$(this).attr("data-overlay"));});$("body").on("click",b(a.back),function(){contextual_help.back($(this));});});$(document).ready(function(){$("body").on("click","[data-ga-trigger]",function(){if(typeof ga!=="undefined"){ga("send","event",$(this).data());}});});$.fn.accordion=function(){var a=$(this).closest('[data-accordion-item="true"]');if(typeof $(a).data("flag")==="undefined"||$(a).data("flag")==="false"){$(a).siblings('[data-accordion-item="true"]').removeClass("cn-accordion--active").data("flag","false");$(a).addClass("cn-accordion--active");$(a).data("flag","true");}else{$(a).removeClass("cn-accordion--active");$(a).data("flag","false");}$(this).preventDefault();};var bindAccordion=function(){$(document).on("click",'[data-accordion-item-header="true"]',function(){$(this).accordion();$(this).preventDefault();});};$(document).ready(function(){$("body").on("click",'[table-row-click="true"]',function(f){if(f.target.tagName==="A"){return;}var d=getSelection().toString();if(!d){var b=$(f.target).parents("tr").find(".cn-table__actions a");if(b.length>0){if($(b).attr("cb-modal")==="true"){$(b[0]).click();}else{var c=$(b).attr("href");if(!_.isUndefined(c)){window.location.href=c;}}}}});});
/*/assets/app/javascripts/cb-modal-box.js*/
var CBModal=function(){function a(b,c){this.config=b;this.element=c;this.init();}$.extend(a.prototype,{init:function(){var c=this;this.create();var b=a.keys.container;$(b).on("click",dataAtrr(a.keys.closeKey),function(){c.hide();});$(b).on("click",function(d){c.outsideClose(d);});$("body").on("keyup",function(d){c.escape(d);});},create:function(){if(this.config.isActive){return false;}var b=this;$.when($(this.element).trigger("show:modal")).then(function(){b.show();b.config.isActive=true;});},show:function(){var g=this;var e=this.config;var c=a.keys.container;$("body").addClass("cn-modal-opened");if($(c).size()<1){$("body").append('<div id="cb-modal-container"></div>');}$(c).html(e.modalHtml);$(c).append('<div class="cn-modal-overlay"></div>');var f=$(c).find("form");if(f.length>0){if(e.ajaxEvent){f.attr("ajaxevent",e.ajaxEvent);}var b=ajaxResponseHandlers[f.attr("ajaxevent")];if(e.autoHide){var h=b.success;b.success=function(j,k,l,i){g.hide();h(j,k,l,i);};}$(f).attachAjaxEventToForm();f.validate();}if(!g.config.esc){$(c).find('[data-modal-close-hint="true"]').hide();}$(c).show();bindComponentEvents();if(!e.strictToSingleColumn){g.resize();}var d=$(c).find("form").find("input[type=text],textarea,select").filter(":visible:first");if(!$(d).hasClass("hasDatepicker")){$(d).focus();}$(c).find('[data-cn-modal="true"]').hide();$(c).find('[data-cn-modal="true"]').fadeIn(200,function(){$(g.element).trigger("after:show:modal");});},resize:function(){if($('[data-modal-container="true"]').height()>=($(window).height()-160)){$(a.keys.container).find('[data-cn-modal="true"]').addClass("cn-modal--advance");}},hide:function(){var b=this;$.when($(b.element).trigger("hide:modal")).then(function(){$("body").removeClass("cn-modal-opened");$(a.keys.submitKey).off("click");$(a.keys.container).fadeOut(0,function(){$(b.element).trigger("after:hide:modal");}).html("");$(a.keys.container).hide();b.config.isActive=false;});},escape:function(b){if(this.config.esc&&this.config.isActive&&b.which==27){this.hide();}},outsideClose:function(b){if(this.config.backdrop&&this.config.isActive&&$(".cn-modal").is(b.target)&&$(".cn-modal").has(b.target).length===0){this.hide();}}});return a;}();CBModal.handelers=$.extend({},ajaxResponseHandlers.defhandler,{success:function(b,d,e,a){if(!b.modalHtml){var c={};c.modalHtml=b;b=c;}new CBModal($.extend(e.modal_data,b),e.modal_trigger_element);},showModal:function(a){},afterShowModal:function(a){},hideModal:function(a){},afterHideModal:function(a){},on_click:function(b,a){return true;}});CBModal.settings={remote:true,backdrop:true,esc:true,isActive:false,autoHide:true,strictToSingleColumn:false};CBModal.keys={closeKey:"data-modal-close",submitKey:"data-modal-submit",container:"#cb-modal-container"};$.fn.cbmodal=function(){return this.filter("a[cb-modal]").each(function(){var b=$(this).data();b=$.extend({},CBModal.settings,b);var a=ajaxResponseHandlers[$(this).attr("modalAjaxEvent")];a=$.extend({},CBModal.handelers,a);$(this).on("click",function(i){if(!a.on_click(b,$(this))){i.preventDefault();return;}if($(this).attr("data-req-sent")){i.preventDefault();return void 0;}try{var d=$(this).attr("href");if(d){$(this).data("href",d);}var g=this;if(b.remote){$(this).ajaxhandler({url:d,type:"GET",data:getDataFromAttr(g),beforeSend:function(k,e){$(CBModal.keys.container).html("");$(g).attr("data-req-sent","true");a.beforeSend(k,e);},complete:function(e,k){$(g).removeAttr("data-req-sent");a.complete(e,k);},success:function(k,l,m,e){m.modal_trigger_element=g;m.modal_data=b;a.success(k,l,m,e);},error:function(e,l,k){a.error(e,l,k);}});}else{if(!$(this).attr("data-local-id")){return;}var j=$(this).attr("data-local-id")+"-container";var f=$(jq(j)).html();var h={modal_data:b,modal_trigger_element:this};var c={modalHtml:f};a.success(c,"",h,$(this));}}finally{i.preventDefault();}}).bind("show:modal",function(c){a.showModal(CBModal,c);}).bind("after:show:modal",function(c){a.afterShowModal(CBModal,c);}).bind("hide:modal",function(c){a.hideModal(CBModal,c);}).bind("after:hide:modal",function(c){a.afterHideModal(CBModal,c);});});};$(document).ready(function(){$("a[cb-modal]").cbmodal();var a=CBModal.keys.container+" "+dataAtrr(CBModal.keys.submitKey);$("body").on("click",a,function(b){$(this).parents(CBModal.keys.container).find("form").submit();b.preventDefault();});});var dataAtrr=function(a){return"["+a+"]";};var getDataFromAttr=function(a){var b={};$.each(a.attributes,function(){var c="param";if(this.name.indexOf(c)===0){var d=this.name.substring(c.length+1).replace("-",".");b[d]=this.value;}});return b;};var CbPopup={options:{esc:true,outside:true,html:"",htmlEle:"",toolTip:false,contentWrapper:"cn-settings__main",contentWrapperC:".cn-settings__main",element:null,beforeShow:function(){},afterShow:function(){},beforeHide:function(){return true;},afterHide:function(){},positionCallBack:function(b,i,h,d){var g=0;function f(k,j){g=k.offsetTop;while(k.offsetParent){k=k.offsetParent;g=g+k.offsetTop;if(k.className&&k.className.split(" ").indexOf(j)>-1){break;}}}f(i,h);var c=$(d).scrollTop();var a="cn-popup--top";if(g-c<($(b).outerHeight()+12)){g=g+($(i).outerHeight()+12)+"px";a="cn-popup--bottom";}else{g=g-($(b).outerHeight()+12)+"px";}var e=i.getBoundingClientRect().left-$(d)[0].getBoundingClientRect().left-($(b).outerWidth()/2)+(i.offsetWidth/2)+"px";$(b).css({top:g,left:e});$(b).addClass(a);}},show:function(c,a){var b=this;this.hide();this.element=c;setTimeout(function(){a=a||{};b.options=$.extend(true,{},b.options,$(c).data(),a);if(typeof b.options.htmlEle!=="undefined"&&b.options.htmlEle!==""){b.options.html=$(jq(b.options.htmlEle)).html();}b.options.html=Mustache.render(CbPopup.templ,{html:a.html});var i=getWindowFun(b.options.beforeShow);var h=getWindowFun(b.options.afterShow);if(_.isFunction(i)){i(b);}$("#cn-popup").remove();var e="";var d=$.extend({},a.position,{});var g=".cn-settings__main";if(b.options.popupContainer){g=jq(b.options.popupContainer);}$(g).append(b.options.html);var f=$("#cn-popup");$(f).addClass("cn-popup--active").addClass(e);if(typeof b.options.positionCallBack!=="undifend"&&_.isFunction(b.options.positionCallBack)){b.options.positionCallBack(f,c,b.options.contentWrapper,b.options.contentWrapperC);}$("body").addClass("cn-popup-opened");if(_.isFunction(h)){h(b,c);}},10);},hide:function(){var a=getWindowFun(this.options.beforeHide);var b=getWindowFun(this.options.afterHide);if(_.isFunction(a)){if(a(this)==false){return;}}$("body").removeClass("cn-popup-opened");$("#cn-popup").remove();if(_.isFunction(b)){b(this);}},templ:'<div class="cn-popup cn-modules" id="cn-popup"><div class="cn-popup__content">{{{html}}}</div></div>'};$(document).ready(function(){$(document).on("click",".cn-popup-opened",function(a){if(!$("#cn-popup").is(a.target)&&$("#cn-popup").has(a.target).length===0){CbPopup.hide();}});});var getWindowFun=function(a){return _.isString(a)?window[a]:a;};
/*/assets/app/javascripts/countries.js*/
var countries={US:{AL:"Alabama",AK:"Alaska",AS:"American Samoa",AZ:"Arizona",AR:"Arkansas",AA:"Armed Forces (AA)",AE:"Armed Forces (AE)",AP:"Armed Forces (AP)",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District of Columbia",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MH:"Marshall Islands",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",FM:"Micronesia",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",MP:"Northern Mariana Islands",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PW:"Palau",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VI:"Virgin Islands",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"},CA:{AB:"Alberta",BC:"British Columbia",MB:"Manitoba",NB:"New Brunswick",NL:"Newfoundland and Labrador",NT:"Northwest Territories",NS:"Nova Scotia",NU:"Nunavut",ON:"Ontario",PE:"Prince Edward Island",QC:"Quebec",SK:"Saskatchewan",YT:"Yukon"},IN:{AN:"Andaman and Nicobar Islands",AP:"Andhra Pradesh",AR:"Arunachal Pradesh",AS:"Assam",BR:"Bihar",CH:"Chandigarh",CT:"Chhattisgarh",DN:"Dadra and Nagar Haveli",DD:"Daman and Diu",DL:"New Delhi",GA:"Goa",GJ:"Gujarat",HR:"Haryana",HP:"Himachal Pradesh",JK:"Jammu and Kashmir",JH:"Jharkhand",KA:"Karnataka",KL:"Kerala",LD:"Lakshadweep",MP:"Madhya Pradesh",MH:"Maharashtra",MN:"Manipur",ML:"Meghalaya",MZ:"Mizoram",NL:"Nagaland",OD:"Odisha",PY:"Pondicherry",PB:"Punjab",RJ:"Rajasthan",SK:"Sikkim",TN:"Tamil Nadu",TG:"Telangana",TR:"Tripura",UP:"Uttar Pradesh",UT:"Uttarakhand",WB:"West Bengal"}};
/*/assets/app/javascripts/client-id.js*/
$(document).ready(function(){var f="_0";if(!jQuery.cookie(f)){var a=(new Date().valueOf()).toString(16)+"-"+Math.floor(Math.random()*Math.pow(2,32)).toString(16);var c=new Date();var b=new Date(c.setFullYear(c.getFullYear()+5));var d=window.location.hostname;d=d.substring(d.lastIndexOf(".",d.lastIndexOf(".")-1)+1);document.cookie=f+"="+a+"; domain="+d+"; path=/;expires="+b;var e=$('<img id="client-id-img" />');e.attr("src","https://www.chargebee.com/static/resources/square.png");$("body").append(e);}});
/*/assets/app/javascripts/adv_filter.js*/
var CBAdvFilter=(function(){var i=CBAdvFilterDtypes;var c="yyyy-MM-dd";var z={};var E=function(K){jQuery.extend(true,z,K);};var r=function(){$('input[name="max_id"]').attr("value",0);$('div[id="cb-filter"]').empty();G();F();};var J=function(K){$('input[name="max_id"]').attr("value",0);$('div[id="cb-filter"]').empty();for(var L in K){g(K[L]["filter[column]"],K[L]["filter[cond]"],K[L]["filter[input][1]"],K[L]["filter[input][2]"]);}F();};var p=function(){var K=$('input[name="max_id"]').val();var O;var M=0;for(var N=1;N<=K;N++){var L=$('input[name="remove['+N+']"]');if(L.length==0){continue;}M++;if(M==1){O=N;}}if(M>1){$('input[name="remove['+O+']"]').removeAttr("disabled");}else{$('input[name="remove['+O+']"]').attr("disabled","disabled");}};var F=function(){$("#cb-filter").on("change",'select[name^="filter[column]"]',function(){B($(this));}).on("change",'select[name^="filter[cond]"]',function(){d($(this));}).on("click",'input[name^="remove"]',function(L){L.preventDefault();var K=$(this).parent("span").parent("div");$(K).remove();p();});$("#flt_add").unbind("click");$("#flt_add").bind("click",function(){G();});$(".cb-form-fl #cb_apply_adv_filter").unbind("click");$(".cb-form-fl #cb_apply_adv_filter").on("click",function(K){if(z.extraParamFn){z.extraParamFn();}if(!e()){K.preventDefault();}});};var B=function(O){var L=O.val();var P=O.parent("span");var N=$(P).next("span");var M=$(P).parent("div").attr("flt_row_index");k("combo2",M,N,P,"flt_condition");var K=h(L,M);N=$(P).next("span");I(L,K,N,null);};var d=function(R){var P=R.val();var K=R.parent("span");var O=$(K).prev();var M=$(O).children("select").val();var L=$(K).next('span[flt_class="flt_data_type"]');var Q=adv_filters[M].dtype;var S;for(var N in i[Q]){if(i[Q][N].cond==P){S=i[Q][N].input;break;}}if($(L).attr("cb_flt_input")!=$("#"+S).attr("cb_flt_input")){I(M,P,K,null);}if($(L).attr("cb_flt_input")=="date"){I(M,P,K,null);}};var h=function(K,M){var L=j(K,M);s(L);return i[adv_filters[K].dtype][0].cond;};var j=function(K,P){var O=adv_filters[K].dtype;var L=$('select[name="filter[cond]['+P+']"]');L.empty();if(adv_filters[K].clvalues){a(L,K,O);}else{for(var M in i[O]){var N=$("<option></option>").attr("value",i[O][M].cond).html(i[O][M].disp_name);L.append(N);}}return L;};var a=function(L,K,Q){var R=u(i[Q][0].group_header);for(var N in i[Q]){var P=$("<option></option>").attr("value",i[Q][N].cond).html(i[Q][N].disp_name);R.append(P);}var O=u("Relative");for(var N in adv_filters[K].clvalues){var M=$("<option></option>").attr("value",adv_filters[K].clvalues[N].val).html(adv_filters[K].clvalues[N].dis_name);O.append(M);}L.append(R).append(O);};var I=function(P,Q,S,U){var L=$(S).next('span[flt_class="flt_data_type"]');var K=$(S).parent("div").attr("flt_row_index");var R=adv_filters[P].dtype;var M=adv_filters[P].autocomplete;var O=adv_filters[P].target;var T;for(var N in i[R]){if(i[R][N].cond==Q){T=i[R][N].input;break;}}if(!_.isUndefined(M)&&M){T="autocomplete_"+T;}var V=k(T,K,L,S,"flt_data_type");if(!_.isUndefined(M)&&M){D(V,O,adv_filters[P].placeHolder,U);}else{if($(V).attr("cb_flt_input")=="select"||$(V).attr("cb_flt_input")=="multi_select"){A($(V).children("select"),P,Q);}else{if($(V).attr("cb_flt_input")=="date"){w($(V).children(),R);}}}return V;};var D=function(O,N,M,K){var L=$(O).attr("cb_flt_input").replace("_","");$(O).find("input").attr("data-cb-select",L);$(O).find("input").attr("data-cb-remote-target",N);$(O).find("input").attr("placeholder",M);if(K!==null){$(O).find("input").attr("value",JSON.stringify(K));}$(O).find("input").cbSelect2Bind();};var w=function(L,K){L.attr("id","").removeClass("hasDatepicker").removeData("datepicker").unbind();if(K=="dt_date_time"||K=="dt_date_time_notnull"){L.datetimepicker({controlType:"spinner",showSecond:true,dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss",useLocalTimezone:false,defaultTimezone:"+0000"});}else{L.datepicker({dateFormat:"yy-mm-dd"});}};var G=function(){var K=$('input[name="max_id"]').val();$('input[name="max_id"]').attr("value",++K);var M=b(K);var L=$('select[name="filter[column]['+K+']"]');s(L);B(M.children("select"));};var b=function(S){t(S);var P=o(S,"combo1","flt_column");var L=$('select[name="filter[column]['+S+']"]');var R=[];var K=[];var M=0;for(var N in adv_filters){var O=$("<option></option>").attr("value",N).html(adv_filters[N].disp_name);if(adv_filters[N].groupHeader){if($.inArray(adv_filters[N].groupHeader,R)==-1){R[M]=adv_filters[N].groupHeader;K[M]=u(R[M]);K[M].append(O);M++;}else{var Q=$.inArray(adv_filters[N].groupHeader,R);K[Q].append(O);}}else{L.append(O);}}if(typeof(K)!=undefined){for(var N in K){L.append(K[N]);}}return P;};var u=function(K){return $("<optgroup></optgroup>").attr("label",K);};var A=function(N,K){for(var M in adv_filters[K].lvalues){var L=$("<option></option>").attr("value",adv_filters[K].lvalues[M].val).html(adv_filters[K].lvalues[M].dis_name);N.append(L);}s(N);};var t=function(K){var L=$("#row").clone(true,true).appendTo($('div[id="cb-filter"]'));L.css("display","block");L.attr("id","flt_row"+K);L.attr("flt_row_index",K);o(K,"remove","flt_remove");p();};var o=function(M,K,N){var L=$("#"+K).clone(true,true).appendTo($('div[id="flt_row'+M+'"]'));L.css("display","inline");L.removeAttr("id");L.attr("flt_class",N);L.find("select").attr("name",function(){var O=this.name;return this.name.replace(O,O+"["+M+"]");});L.find("select").attr("id",function(){var O=this.id;return this.id.replace(O,O+M);});L.find("input").attr("name",function(){var O=this.name;return this.name.replace(O,O+"["+M+"]");});return L;};var k=function(M,O,K,P,N){$(K).remove();var L=$("#"+M).clone(true,true).insertAfter($(P));L.css("display","inline");L.removeAttr("id");L.attr("flt_class",N);L.find("input").attr("name",function(){var Q=this.name;return this.name.replace(Q,Q+"["+O+"]");});L.find("select").attr("id",function(){var Q=this.id;return this.id.replace(Q,Q+O);});L.find("select").attr("name",function(){var Q=this.name;return this.name.replace(Q,Q+"["+O+"]");});l(L);return L;};var l=function(K){var O=$(K).find("input");if(typeof O=="undefined"||O.length==0){O=$(K).find("select");}var M=$(K).find("em");if(typeof M=="undefined"||M.length==0){return;}for(var N=0;N<O.length;N++){var L=$(O[N]).attr("name");if(typeof M[N]!="undefined"){$(M[N]).attr("data-cb-flt-error",L);}}};var g=function(N,V,R,Q){var X=$('input[name="max_id"]').val();$('input[name="max_id"]').attr("value",++X);var T=b(X);var O=$('select[name="filter[column]['+X+']"]');O.find('option[value="'+N+'"]').attr("selected","selected");s(O);var M=k("combo2",X,null,T,"flt_condition");var L=j(N,X);L.find('option[value="'+V+'"]').attr("selected","selected");s(L);var P=I(N,V,M,R);var K=adv_filters[N].autocomplete;var W=$(P).children();if(_.isUndefined(K)||!K){if($(P).attr("cb_flt_input")=="select"){$(W).find('option[value="'+R+'"]').attr("selected","selected");$(W).trigger("liszt:updated");}else{if($(P).attr("cb_flt_input")=="multi_select"){for(var S=0;S<R.length;S++){$(W).find('option[value="'+R[S]+'"]').attr("selected","selected");}if(!_.isArray(R)){$(W).find('option[value="'+R+'"]').attr("selected","selected");}$(W).trigger("liszt:updated");}else{if($(P).attr("cb_flt_input")=="date"){var U=adv_filters[N].dtype;c=q(U);$(W).datepicker("setDate",Date.parseExact(R,c));$('input[name="filter[to]['+X+']"]').datepicker("setDate",Date.parseExact(Q,c));}else{$(W).attr("value",R);}}}}};var s=function(K){K.chosen({disable_search_threshold:8,allow_single_deselect:true});};var e=function(){if(!$(".cb-detailedFilter").is(":visible")){return true;}try{var K=$('input[name="max_id"]').val();$(".cb-dateError").removeClass();$(".cb-fielderr-msg to").css("display","none");$(".cb-fielderr-msg").css("display","none");for(var M=1;M<=K;M++){var P=$('select[name="filter[column]['+M+']"] option:selected').val();if(typeof P=="undefined"){continue;}var O=adv_filters[P].dtype;c=q(O);var N=$('select[name="filter[cond]['+M+']"] option:selected').val();if(!x(M,N,O)){return false;}}return true;}catch(L){return false;}};var q=function(K){if(K=="dt_date_time"||K=="dt_date_time_notnull"){return"yyyy-MM-dd HH:mm:ss";}else{return"yyyy-MM-dd";}};var x=function(L,O,N){if(O=="between"){var Q=$('input[name="filter[to]['+L+']"]');var P=$('input[name="filter[from]['+L+']"]');if(!n(Q,P,c)){return false;}}else{var M;if(N==="dt_mul_sel_nullable"||N==="dt_mul_sel"||N==="dt_mul"||N==="dt_mul_notnull"){M=$('select[name="filter[input]['+L+']"]');}else{M=$('input[name="filter[input]['+L+']"]');}if(!f(M)){return false;}if(O=="before"||O=="after"){if(!H(M,c)){return false;}}}if(N=="dt_integer"||N=="dt_integer_notnull"){var K=$('input[name="filter[input]['+L+']"]');if(!y(K)){return false;}}if(N=="dt_double"||N=="dt_double_notnull"||N=="dt_money"||N=="dt_money_notnull"){var R=$('input[name="filter[input]['+L+']"]');if(!v(R)){return false;}}return true;};var m=function(L,M){L.parent().addClass("cb-dateError");var K=$('em[data-cb-flt-error="'+L.attr("name")+'"]');K.empty();K.append("<em></em>"+M);K.show();};var C=function(K){jQuery.each(K.errors,function(M,L){if(L.param!=null){m($("[name='"+L.param+"']"),L.message);}});};var n=function(O,N,M){if(!f(N)){return false;}if(!f(O)){return false;}if(!H(N,M)){return false;}if(!H(O,M)){return false;}var L=Date.parseExact($.trim(N.val()),M);var K=Date.parse($.trim(O.val()),M);if(L!=null&&K!=null&&L.compareTo(K)>0){m(O,"to date should be greater");return false;}return true;};var f=function(K){if(K.length>0&&($.trim(K.val())==""||$.trim(K.val())==null)){m(K,"cannot be blank");return false;}return true;};var H=function(L,M){if(L.length>0){var K=Date.parseExact($.trim(L.val()),M);if(K==null){m(L,"wrong date format");return false;}}return true;};var y=function(K){if(K.length>0&&!/^\d+$/.test($.trim(K.val()))){m(K,"should be a valid input");return false;}return true;};var v=function(K){if(K.length>0&&!/^((\d+(\.\d *)?)|((\d*\.)?\d+))$/.test($.trim(K.val()))){m(K,"should be a valid input");return false;}return true;};return{advFilter:r,reloadAdvFilter:J,validateRange:n,advFltValidator:e,extraConfig:E,addError:C};}());
/*/assets/app/javascripts/session-handling.js*/
var sessionTimeout={url:null,lastRefreshedAt:-1,refreshedAt:-1,clientTimeoutInMillis:30*60*1000,timeoutId:null,checkTimeoutId:null,userLogoutagentid:null,openedPopup:null,sessionType:{password:100,goauth:200,accreg:300,logout:0},sessionLoginPopup:"#session_login_popup",startTimer:function(){this.lastRefreshedAt=this.getTimeoutVal();this.timeoutId=setTimeout(sessionTimeoutUtils.sequenceAjax,sessionTimeout.clientTimeoutInMillis);},resetTimer:function(){clearTimeout(this.timeoutId);clearInterval(this.checkTimeoutId);if(sessionTimeoutUtils.modal){sessionTimeoutUtils.modal.hide();}this.startTimer();this.checkForRefreshCookie(false);},checkForRefreshCookie:function(a){var b=this;if(a){clearInterval(this.checkTimeoutId);}else{b.handleUserLogout();}this.checkTimeoutId=setInterval(function(){b.refreshedAt=b.getTimeoutVal();if(b.lastRefreshedAt<b.refreshedAt){b.lastRefreshedAt=b.refreshedAt;b.resetTimer();if(a){clearInterval(sessionTimeoutUtils.ajaxQueId);b.handleUserLogout();sessionTimeoutUtils.openOldPopup();sessionTimeoutUtils.checkAccess();}}},500);},handleUserLogout:function(){clearInterval(this.userLogoutagentid);this.userLogoutagentid=setInterval(function(){if(!sessionTimeout.getTimeoutVal()){clearInterval(sessionTimeout.userLogoutagentid);location.reload(true);}},1000);},clearhandlerInterval:function(){clearInterval(this.userLogoutagentid);},getTimeoutVal:function(){return jQuery.cookie("server_timestamp");},isPopupOpened:function(){return($(this.sessionLoginPopup).data("bs.modal")||{}).isShown;}};var sessionTimeoutUtils={ajaxQueId:null,closeOpenedPopup:function(){var a=$($(".reveal-modal").filter(function(){return $(this).css("visibility")==="visible";})[0]).attr("id");if(typeof a!=="undefined"){$(jq(a)).trigger("reveal:close");}sessionTimeout.openedPopup=a;},openOldPopup:function(){var a=sessionTimeout.openedPopup;if(typeof a!=="undefined"){$(jq(a)).reveal();sessionTimeout.openedPopup=null;}},checkAccess:function(){var a=$('meta[name="csrf-token"]').attr("content");$(this).ajaxhandler({url:"/users/check_access",type:"post",data:{_csrf_token:a},success:function(c,d,e,b){if(c.reload){ajaxResponseHandlers.defhandler.success(c,d,e,b);}},error:function(b,d,c){window.location.href=window.location.href;}});},sequenceAjax:function(){clearInterval(sessionTimeout.userLogoutagentid);sessionTimeout.checkForRefreshCookie(true);sessionTimeoutUtils.ajaxQueId=setInterval(function(){if(!document.hidden||(document.hidden&&sessionTimeoutUtils.isSessionQueueEqual("true"))){clearInterval(sessionTimeoutUtils.ajaxQueId);sessionTimeoutUtils.showTimeoutPopup();}},500);},showTimeoutPopup:function(){sessionTimeoutUtils.closeOpenedPopup();$(this).ajaxhandler({url:sessionTimeout.url,type:"POST",data:{old_token:$('meta[name="csrf-token"]').attr("content")},success:function(b,d,e,a){var c={backdrop:false,esc:false};c.modalHtml=b;sessionTimeoutUtils.modal=new CBModal(c,this);sessionTimeoutUtils.setSessionQueue("true");},beforeSend:function(b,a){}});},handleAccountReg:function(){setInterval(function(){var a=jQuery.cookie("accountreg_"+window.location.host.split(".")[0]);if(a){window.location.href=a+window.location.pathname;}},1000);},setSessionQueue:function(b){var a=location.hostname;a=a.substring(a.indexOf(".")+1,a.length);if(!sessionTimeoutUtils.isSessionQueueEqual(b)){$.cookie("session_popup",b,{domain:a});if(b==="false"){$.removeCookie("session_popup",{domain:a});}}},isSessionQueueEqual:function(b){var a=$.cookie("session_popup");return(typeof a)&&a===b;}};ajaxResponseHandlers.handleSessionTimeout={success:function(a,c,d,b){sessionTimeoutUtils.setSessionQueue("false");},error:function(a,c,b){ajaxResponseHandlers.formhandler.error(a,c,b);}};var initSessionHandling=function(b,a,c){switch(b){case sessionTimeout.sessionType.password:sessionTimeout.url=a;sessionTimeout.clientTimeoutInMillis=c;sessionTimeout.checkForRefreshCookie(false);break;case sessionTimeout.sessionType.accreg:sessionTimeoutUtils.handleAccountReg();break;case sessionTimeout.sessionType.logout:sessionTimeout.handleUserLogout();break;}};
/*/assets/app/javascripts/material_modal.js*/
var Modal=(function(){var i,m,n,l,a,r;var e=window;var j=false;var t=200;var d=50;function k(){i=u(".modal__trigger");m=u(".modal-new");n=u(".modal__bg");l=u(".modal__content");a=u(".modal__close");r=i.length;}function u(v){return document.querySelectorAll(v);}var f=function(v){if(v!=null){v.preventDefault();}t=200;d=50;s(this);};var q=function(){t=200;d=50;s($("#site_help")[0]);};var s=function(x){var w=x.dataset.modal;var v=w.length;var z=w.substring(1,v);var y=document.getElementById(z);c(x,y);};var c=function(v,x){var w=document.getElementById("modal__temp");if(w===null){var y=document.createElement("div");y.id="modal__temp";v.appendChild(y);o(v,x,y);}};var o=function(z,E,v){var B=z.getBoundingClientRect();var w=E;var F=w.querySelector(".modal__content").getBoundingClientRect();var y,x,D,C;var G=e.innerWidth/2;var A=e.innerHeight/2;z.classList.add("modal__trigger_active");D=F.width/B.width;C=F.height/B.height;D=D.toFixed(3);C=C.toFixed(3);y=Math.round(G-B.left-B.width/2);x=Math.round(A-B.top-B.height/2);if(w.classList.contains("modal_align-top")){x=Math.round(F.height/2+F.top-B.top-B.height/2);}z.style.transform="translate("+y+"px, "+x+"px)";z.style.webkitTransform="translate("+y+"px, "+x+"px)";v.style.transform="scale("+D+","+C+")";v.style.webkitTransform="scale("+D+","+C+")";window.setTimeout(function(){window.requestAnimationFrame(function(){g(w,v);});},t);};var g=function(v,y){if(!j){var w=v.querySelector(".modal__content");v.classList.add("modal_active");w.classList.add("modal__content_active");w.addEventListener("transitionend",x,false);j=true;}function x(){y.style.opacity="0";w.removeEventListener("transitionend",x,false);}};var h=function(w){w.preventDefault();w.stopImmediatePropagation();var x=w.target;var z=document.getElementById("modal__temp");if(j&&x.classList.contains("modal__bg")||x.classList.contains("modal__close")){z.style.opacity="1";z.removeAttribute("style");for(var v=0;v<r;v++){m[v].classList.remove("modal_active");l[v].classList.remove("modal__content_active");i[v].style.transform="none";i[v].style.webkitTransform="none";i[v].classList.remove("modal__trigger_active");}z.addEventListener("transitionend",y,false);j=false;}function y(){setTimeout(function(){window.requestAnimationFrame(function(){z.remove();});},t-d);}};var b=function(){for(var v=0;v<r;v++){i[v]?i[v].addEventListener("click",f,false):void 0;a[v]?a[v].addEventListener("click",h,false):void 0;n[v]?n[v].addEventListener("click",h,false):void 0;}};var p=function(){k();b();};return{init:p,showFirst:q};}());$(document).ready(function(){Modal.init();});
/*/assets/app/javascripts/enums.js*/
var RetrySetting={ActionType:{CANCEL_SUBSCRIPTION:200,MARK_AS_UNPAID:300,MARK_AS_VOID_AND_CANCEL_SUBSCRIPTION:400}};var Addon={Type:{ON_OFF:100,QUANTITY:200}};
/*/assets/app/javascripts/application.js*/
jscolor.dir="/assets/vendor/global/images/jscolor/";jscolor.binding=true;$(document).ready(function(){var f=function(p){p=p||{};if(window.siteTimeMillis){p.defaultDate=new Date(siteTimeMillis);}return p;};$(".cb-date-field").filter(":input").css("cursor","pointer").datepicker(f({dateFormat:"yy-mm-dd"}));$(".cb-datetime-field").filter(":input").css("cursor","pointer").datetimepicker(f({controlType:"spinner",showSecond:true,dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss",useLocalTimezone:false,defaultTimezone:"+0000",beforeShow:function(q,p,s){var t=$(q).attr("data-date-disabled");if(typeof t!="undefined"&&t=="true"){if(/^\s*$/.test($(q).val()||"")){var r=new Date();r.setMinutes(r.getMinutes()+r.getTimezoneOffset());if(window.siteTimeMillis){r=new Date(siteTimeMillis);}s.hour=r.getHours();s.minute=r.getMinutes();s.second=r.getSeconds();}}}}));$(".cb-js-datetimewithoutsec-field").filter(":input").css("cursor","pointer").datetimepicker(f({controlType:"spinner",showSecond:false,dateFormat:"yy-mm-dd",timeFormat:"HH:mm",useLocalTimezone:false,defaultTimezone:"+0000"}));var a=new Date();var h=new Date();h.setMinutes(h.getMinutes()+h.getTimezoneOffset());var g=window.siteTimeMillis?new Date(siteTimeMillis):(h.getDate()!==a.getDate()&&h.getTime()<a.getTime()?-1:0);$('input[data-date-disabled="true"]').css("cursor","pointer").datepicker("option","minDate",g);$("select[placeholder=true]").change(function(){var p=$(this);var q=p.find("option:selected");var r="cb-select-placeholder";if(q.val()==""){p.addClass(r);}else{p.removeClass(r);}});var b=$("#cb-details-tab > a:visible:first-child").attr("href");$("#cb-details-tab > a:visible:first-child").addClass("active");$(b).removeClass("hide");$("#cb-details-tab > a").click(function(){var p=$(this).attr("href");$.each($("#cb-details-tab > a"),function(r,s){var q=$(this).attr("href");if(p!=q){$(s).removeClass("active");$(q).addClass("hide");}else{$(s).addClass("active");$(p).removeClass("hide");}});return false;});$(".cb-addon-type").change(function(){var p=$(this).find("select");var r=$(this).next("li");var t=Addon.Type.ON_OFF,s=Addon.Type.QUANTITY;if(p.val()==t){r.hide();}else{r.show();}});$(".cb-email-toggle").click(function(){$(this).parents("form").submit();});$(".cb-customize-email").click(function(){var p=$(this).parents("tr.cb-email-notification").next();p.toggle();var q=p.find("div.linedwrap");if(q.length==0){var r=p.find(".lined");r.linedtextarea();var s=function(t){t.parents("div.linedwrap").toggleClass("input_focus");};r.focus(function(){s($(this));}).focusout(function(){s($(this));});}});$("ul.cb-email-ph > li").click(function(){$(this).parents("div.cb-custom-mail").find("textarea").insertAtCaret($(this).text());});$("input[name=reset_template]").click(function(q){$(".email-error").hide();var p=$(this).parents("li").parent();p.find("textarea").val(p.find("input[name=last_saved_template]").val());});$("#reset_template").click(function(q){$(".email-error").hide();var p=$(this).parents("li").parent();tinyMCE.get("site_notification.email_html_template").setContent(p.find("input[name=last_saved_html_template]").val());});var d;$("#cb-show-hide-pwd-link").click(function(){if($("#password").prop("type")==="password"){d=e();}else{if($("#password").prop("type")==="text"){if(!(_.isUndefined(d))){clearTimeout(d);}n();}}});function e(){$("#password").replaceWith($("#password").clone().prop("type","text"));$("#cb-show-hide-pwd-link").text("Hide");return setTimeout(n,10000);}function n(){if($("#password").prop("type")==="text"){$("#password").replaceWith($("#password").clone().prop("type","password"));$("#cb-show-hide-pwd-link").text("Show");}}$(".cb-status-flash").bind("flash:visible",function(q){var p=$(this).find("p");if(p.html()){$(this).delay(5000).fadeOut(1000);}});$("#cb-customize-css").click(function(){$("div.cb-css-text").toggle();return false;});$("iframe").iframeAutoHeight({heightOffset:50});$("a.cb-submit-link.reset-changes").click(function(){window.location.href=window.location.href;return false;});$("a.cb-submit-link.default").click(function(){$("input[name=oper]").attr("value","default");$(this).parents("form").submit();return false;});$("#cb-mode-live-txt, .cb-theme-options, .cb-custm-icon, #pretty-money, .cb-help-icn[title], .cb-tipsy-gravity-n[title]").tipsy({gravity:"n"});$(".cb-tipsy-gravity-e").tipsy({gravity:"e",opacity:1});$(".cb-dashboard-value .value, .cb-dashboard-value .cb-valueLabel > span[original-title]").tipsy({gravity:"n",opacity:1});$(".cb-value-title > span[original-title] ,#cb-dashboard .cb-tipsy-gravity-s").tipsy({gravity:"s",opacity:1});$("[cb-tipsy]").each(function(){$(this).tipsy($(this).data());});$(".select-on-click").selectOnClick();$("input[type='text'].select-on-click").on("click",function(){$(this).select();});function i(){$(this).click(function(){$(".cb-select-sitename").slideDown("fast");});}function c(){$(".cb-select-sitename").slideUp("fast");}$("div.cb-select-site").hoverIntent({sensitivity:7,interval:100,over:i,timeout:500,out:c});function m(){$(this).click(function(){$(".cb-subscription-action > .list").slideDown("fast");$(".cb-subscription-action").addClass("active");});}function j(){$(".cb-subscription-action > .list").slideUp("fast");$(".cb-subscription-action").removeClass("active");}$(".cb-subscription-action").hoverIntent({sensitivity:7,interval:100,over:m,timeout:500,out:j});$(".cartno").click(function(){var p=$(this).text();$("#card_number").val(p);$("#cvv").val("100");dt=Date.today().add({years:1});$(jq("credit_card.expiry_month")).val("12");$(jq("credit_card.expiry_year")).val(dt.getFullYear());});$(".accountNo").click(function(){var q=$(this).text();var p=$(this).next("span").text();$("#routing_number").val(p);$("#account_number").val(q);});$("#cb-main-content").on("click",".cb-table",function(q){var p=$(q.target).parents("tr").find(".cb-child-link a").attr("href");if(p!=undefined){window.location=p;}});$(".cb-value-container .cb-value-text, .cb-value-container .cb-value-text2").click(function(p){var q=$(p.target).find("a").attr("href");if(q!=undefined){window.location=q;}});$(".cb-currency-field input").focus(function(){$(this).parent().addClass("input_focus");});$(".cb-currency-field input").focusout(function(){$(this).parent().removeClass("input_focus");});$(".cb-invoice-recurring, .cb-invoice-onetime, #cb-coupon-display *[title]").tipsy({gravity:"w"});$(".cb-chzn").chosen({disable_search_threshold:10,allow_single_deselect:true});$('.cb-tooltip input[type="text"][title], .cb-third-party-list *[title], #cb-test-liveSwitch *[title], .cb-advClose, .cb-statusIcn[title]').tipsy();$(".cb-actn *[title], .cb-table_group *[title], .cb-bulkActn, \n        .cb-stngs-widget-container .cb-widget .content > .cb-imp-notify, .cb-browserIcn[title],\n    .cb-tipsy-gravity-s, .panel>.panel-heading>.glyphicon-exclamation-sign[title], [data-tipsy-gravity-s]").tipsy({gravity:"s"});$(".cb-themeThump *[title], .cb-switch_reponsive *[title]").tipsy({gravity:"n"});$("#cb-switch-device > span").tipsy({gravity:"n"});$(".cb-new-notify[title], [data-tipsy-gravity-e]").tipsy({gravity:"e"});$(".cb-tipsy-gravity-n").tipsy({gravity:"n",opacity:1});$(".cb-tipsy-gravity-w").tipsy({gravity:"w"});$(".cb-tipsy-gravity-nw").tipsy({gravity:"nw"});$("#cb-test-liveSwitch > .action > .test .siteMessageCall").click(function(p){p.stopPropagation();$(".siteMessage").toggle();});$("body").click(function(p){if(!$(p.target).hasClass("siteMessage")){$(".siteMessage:visible").hide();}});var o=($("body").width()-$("body > .wrapper").width())/2;$("#feedback, .feedbackForm").css("right",o+20);$("html").click(function(){$(".feedbackForm:visible").slideUp("fast");});$(document).keyup(function(p){if(p.which===27){$(".feedbackForm:visible").slideUp("fast");}});$("#feedback, .feedbackForm").click(function(p){p.stopPropagation();});$("#feedback").click(function(){$("#feedback_send_mail .error").text("");$(".feedbackForm").slideToggle("fast");$(".feedbackForm textarea").focus();});$("#feedbacktext").click(function(){$("#feedback_send_mail .error").text("");});ajaxResponseHandlers.feedback_event={success:function(q,s,t,p){$(".feedbackForm").hide();$("#feedback_send_mail")[0].reset();$("#feedback_send_mail .error").text("");var r=flashMessage.get(q.flash);flashMessage.show(r);},error:function(r,t,s){var p=ajaxResponseHandlers.defhandler.parse(r.responseText);var q="";jQuery.each(p.errors,function(v,u){if(u.param!=null){q=flashMessage.getAsFlash("error",u.message);}});$("#feebackErr").text(q.message);}};var k=!!("placeholder" in document.createElement("input"));if(!k){$("input[placeholder], textarea[placeholder]").placeholder();}if(!k){$(".feedbackForm textarea").attr("placeholder","");$(".feedbackForm textarea").html("");$('input[realtype="password"]').focus(function(){$(this).prop("type","password").val("");});}$(".cb-select2-box").select2();(function(){$("#cb-main-content").on("click",'a[popup="server"]',function(p){$(this).ajaxhandler("cb_confirm_popup");p.preventDefault();});ajaxResponseHandlers.cb_confirm_popup={success:function(q,s,t,p){$("#cb-dynamic-confirm-box-holder").html(q);var r=$("#cb-dynamic-confirm-box-holder").find("div:first-child").attr("id");$("#"+r).reveal().draggable({disabled:false,cursor:"move",containment:"window"});$(".reveal-close").click(function(){$(this).trigger("reveal:close");});$("#cb-dynamic-confirm-box-holder").find("form").validate();},error:function(p,r,q){ajaxResponseHandlers.defhandler.error(p,r,q);}};})();$("span[cbdata-base-path],input[cbdata-base-path]").click(function(p){if($(".cb-detailedFilter").is(":visible")&&!CBAdvFilter.advFltValidator()){p.preventDefault();return;}var q=$(this).attr("cbdata-base-path");if(typeof q==="undefined"){return;}q+="&"+CBAdvFilterUtilStandard.paramSubscription();exportPopup.call(this,q);});$(document).on("dblclick","dd",function(p){l(this);});function l(q){var s=document,t=q,p,r;if(s.body.createTextRange){p=document.body.createTextRange();p.moveToElementText(t);p.select();}else{if(window.getSelection){r=window.getSelection();p=document.createRange();p.selectNodeContents(t);r.removeAllRanges();r.addRange(p);}}}});function exportPopup(b){var a=b;$(this).attr("post",true);$(this).ajaxhandler({url:a,type:"POST",success:function(d,e,f,c){popup_content(d);},error:function(e,g,f){var c=ajaxResponseHandlers.defhandler.parse(e.responseText);var d="";jQuery.each(c.errors,function(i,h){if(h.param==null){d=flashMessage.getAsFlash("error",h.message);}});CBAdvFilter.addError(c);flashMessage.show(d);}});}function checkExportStatus(){$(this).ajaxhandler({url:$("#cb-popup-heading").attr("export-url"),type:"GET",success:function(b,c,d,a){if(b.isSuccess==true){$("#cb-popup-heading").html($("#success-heading").html());$("#cb-popup-msg-id").html($("#success-msg").html());var a=$("#popup-confirm-box").find('form[data-cb-popup-form="form"]');a.find('a[cb-popup-dwn-id="download-link"]').attr("href",b.downloadUrl);download(a.find('a[cb-popup-dwn-id="download-link"]').attr("href"));$("#cb-popup-warning-icon > span").removeClass("processing");$("#cb-popup-warning-icon > span").addClass("complete");$("#cb-popup-confirm-cancel").html("OK");$("#cb-popup-heading").removeAttr("export-url");}else{if(b.isFailed==true){$("#cb-popup-heading").html($("#failed-heading").html());$("#cb-popup-msg-id").html($("#failed-msg").html());$("#cb-popup-warning-icon > span").removeClass("processing");$("#cb-popup-warning-icon > span").addClass("failed");$("#cb-popup-confirm-cancel").html("OK");$("#cb-popup-heading").removeAttr("export-url");}else{if(b.isPending==true){setTimeout(checkExportStatus,5000);}}}}});}ajaxResponseHandlers.shipping_label_export={success:function(b,c,d,a){popup_content(b);}};function popup_content(a){$("#cb-popup-heading").html($("#pending-heading").html());$("#popup-confirm-box").addClass("report_popup");$("#cb-popup-warning-icon").removeAttr("class");$("#cb-popup-warning-icon > span").removeAttr("class");$("#cb-popup-warning-icon > span").addClass("processing");$("#cb-popup-msg-id").html($("#pending-msg").html());$("#cb-popup-confirm-submit").hide();$("#cb-popup-confirm-cancel").html("Close");$("#popup-confirm-box").reveal();$("#cb-popup-heading").attr("export-url",a.statusUrl+"?id="+a.export_id);setTimeout(checkExportStatus,5000);}function download(a){var b=document.createElement("iframe");b.setAttribute("src",a);b.setAttribute("style","display:none;");document.body.appendChild(b);}function registerWithWistia(){if(typeof wistiaEmbeds!="undefined"){linkWithWistia();}else{setTimeout(registerWithWistia,2000);}}function linkWithWistia(){wistiaEmbeds.onFind(function(a){recordVideoAnalytics("video_clicked",a);a.bind("play",function(){ga("send","event","Video","Play",a.name());recordVideoAnalytics("video_play",a);return this.unbind;}).bind("end",function(){ga("send","event","Video","Complete",a.name());recordVideoAnalytics("video_complete",a);return this.unbind;});});}function recordVideoAnalytics(a,b){recordAnalytics(a,b.name());}function recordAnalytics(a,b){$.ajax("/analytics/record?event="+encodeURIComponent(a)+"&event_data="+encodeURIComponent(b));}(function(){window.actionJsHandler=function(){return{exportJobFunction:function(c){var d=$(this).attr("href");if(_.isUndefined(d)){return;}var b=document.createElement("a");d+="&"+c.allParam(true);$(b).attr("src",d);exportPopup.call($(b),d);}};}();ajaxResponseHandlers.cb_common_action_handler={success:function(b,e,f,a){var d=$("#filter-form");if(!_.isUndefined(d)&&d.length>0){var c=flashMessage.get(b.flash);if(_.isUndefined(cbFilterUtilObj)||_.isUndefined(cbFilterUtilObj.currentUrl)){c.type="error";c.message="Sorry,something went wrong while refreshing table data. Please refresh the page to see updated result.";}else{cbFilterUtilObj.loadTableOnly(cbFilterUtilObj.currentUrl);}flashMessage.show(c);$(".reveal-modal").trigger("reveal:close");}else{window.location.replace(b.forward);}},error:function(a,c,b){ajaxResponseHandlers.formhandler.error(a,c,b);}};})();ajaxResponseHandlers.cb_ajax_loading_v2={version:2,ajaxLoaderVersion:2};function checkForNotification(c){var a="nfn_"+$("#digest_email").val();var b=$.cookie(a);if(typeof b==="undefined"){setCookie(a,"0",true);}else{checkLastUpdatedTime(a,b,c);}}$(document).ready(function(){$("#new_feature_notification").click(function(){var a="nfn_"+$("#digest_email").val();setCookie(a,new_feature_version,false);window.open("https://www.chargebee.com/help/updates/","_blank");});});function checkLastUpdatedTime(c,b,d){var a=false;if(b!==d){a=true;}setCookie(c,b,a);}function displayNotification(a){if(a===true){$("#new_feature_notification").css({color:"#ff7846",opacity:"1"});}else{$("#new_feature_notification").removeAttr("style");}}function setCookie(b,c,a){createCookieWithExpiration(b,c);displayNotification(a);}function createCookieWithExpiration(c,b){var a=getCookieProp();a.expires=parseInt($("#cookie_expiration").val());$.cookie(c,b,a);}var ExploreCb={showExploreCb:function(){if($("#ex-cb-cont").length>0){ExploreCb.navigateTab($(jq("nav-invoice")));this.show();return;}var a=this;$(this).ajaxhandler({url:"/home/getting_started",type:"GET",success:function(e,c,d,b){$("body").append(e);a.show();}});},show:function(){$("body").append("<div class='cn-ec__overlay'></div>");$("body").css("overflow","hidden");$(".cn-ec").addClass("active");},hide:function(){$("body").css("overflow","visible");$(".cn-ec__overlay").remove();$(".cn-ec").removeClass("active");},navigateTab:function(a){$('[data-ex-cb-tab="true"]').removeClass("active");$(a).addClass("active");$('[data-ex-cb-content="true"]').removeClass("active");$(jq($(a).attr("data-cont-id"))).addClass("active");}};$(document).ready(function(){$("body").on("keyup",function(a){if(a.which==27&&$(".cn-ec").hasClass("active")){ExploreCb.hide();}});});$.fn.cbAccountSettings=function(){$(this).click(function(){$('[data-cb-account-content="true"]').fadeIn(200);});function a(){$('[data-cb-account-content="true"]').fadeOut();}$(this).hoverIntent({sensitivity:7,interval:100,timeout:500,out:a,over:function(){}});};$(document).ready(function(){$('[data-cb-account-nav="true"]').cbAccountSettings();});function getTimeZone(){var b=new Date().getTimezoneOffset(),a=Math.abs(b);return(b<0?"+":"-")+("00"+Math.floor(a/60)).slice(-2)+":"+("00"+(a%60)).slice(-2);}ajaxResponseHandlers.feedbackEvent={afterShowModal:function(a){var b="#feedback_send_mail_call #contact_timezone";$(b).children().each(function(){if($(this).text().indexOf(getTimeZone())!==-1){$(this).attr("selected","selected");return false;}});}};var resizeIframePoll=function(){var a=false;var b=setInterval(function(){var c=$("#cb-invoicenote-content").find("iframe");if(!a&&c.contents().find('[data-content-container="true"]').length>0){var d=c.contents().find('[data-content-container="true"]').height();if(d>=170){d="200px";}else{d=d+20+"px";}c.css("height",d);a=true;clearInterval(b);}},500);};$(document).ready(function(){var a=100;$("[data-side-bar]").each(function(){if($(this).children().length==0){$(this).closest("div").remove();$('[data-side-bar-trigger="'+$(this).attr("data-side-bar")+'"]').remove();}else{if(a>$(this).attr("data-action-order")){$('[data-side-bar-trigger="'+$(this).attr("data-side-bar")+'"]').click();a=$(this).attr("data-action-order");}}});if($('[data-main-div="true"]').children().length==1){$('[data-main-div="true"]').remove();}else{if($('[data-main-div="true"]').children().length!=0){$('[data-main-div="true"]').hide().css("visibility","visible");$('[data-main-div="true"]').fadeIn(200);}}});
/*/assets/app/javascripts/version-checker.js*/
var BuildVersionChecker=function(){function a(b,d,c){this.version=parseInt(b);this.path=d;this.requestStack=[];this.interval=parseInt(c);}$.extend(a.prototype,{start:function(){var b=this;this.versionPolling&&clearInterval(this.versionPolling);this.versionPolling=null;this.versionPolling=setInterval(function(){b.checkVersion();},this.interval);},checkVersion:function(){var b=this;this.abort();this.requestStack.push($.ajax({url:b.path,type:"GET",success:function(c,e,d){if(c.hasOwnProperty("version")&&parseInt(c.version)>b.version){if(window.sessionStorage){window.sessionStorage.clear();}window.location.reload();}},error:function(c,e,d){if(e==="abort"){return;}}}));},abort:function(){if(_.isUndefined(this.requestStack)){return;}for(var b=0;b<this.requestStack.length;b++){this.requestStack[b].abort();}}});return a;}();
/*/assets/app/javascripts/chart_util.js*/
function drawAreaChart(a,k,g,j,l,e){var c=g.length;if(c>0){var d=g[c-1];var i;var h;if(d instanceof Object){i=d.y;h=d.money_val;}else{i=d;}var f={y:i,money_val:h,marker:{enabled:true},dataLabels:{enabled:true,align:"right",style:{fontWeight:"bold"},y:-3,formatter:function(){var n=checkValue(this.point.money_val,this.y);return n;},verticalAlign:"bottom",overflow:true,crop:false}};g[c-1]=f;}var b=null;var m=null;return new Highcharts.Chart({chart:{renderTo:a,type:"area",height:250},credits:{enabled:false},title:{text:null},xAxis:{categories:k,tickInterval:3,labels:{formatter:function(){if(this.isFirst){b=this.value.substring(0,3);m=false;return"<p>"+this.value.substring(4,this.value.length)+"</p><br/><b>("+this.value.substring(0,3)+")</b>";}else{if(this.value.substring(0,3)!=b&&!m){m=true;return"<p>"+this.value.substring(4,this.value.length)+"</p><br/><b>("+this.value.substring(0,3)+")</b>";}}return this.value.substring(4,this.value.length);}}},yAxis:{title:{text:l,style:{color:"rgb(128, 128, 128)",fontWeight:"bold"}},min:e,gridLineColor:"rgb(238,238,238)"},legend:{enabled:false},tooltip:{formatter:function(){var n=checkValue(this.point.money_val,this.y);return this.x+" : <b>"+n+"</b>";}},plotOptions:{area:{marker:{enabled:false},lineColor:"#609cdc",lineWidth:1.5,shadow:false,color:"#609cdc",fillColor:"#d3e7ff"}},series:[{name:j,data:g}]});}function checkValue(b,a){if(b===undefined||b===null){return a;}return b;}function drawColumnChart(b,e,c,a,d){return new Highcharts.Chart({chart:{renderTo:b,type:"column",height:250},credits:{enabled:false},title:{text:null},xAxis:{categories:e,labels:{style:{fontWeight:"bold"}},lineColor:"#609cdc"},yAxis:{min:0,title:{text:d,style:{color:"rgb(128, 128, 128)",fontWeight:"bold"}},gridLineColor:"rgb(238,238,238)"},legend:{enabled:false},tooltip:{borderColor:"#609cdc",formatter:function(){var f=checkValue(this.point.money_val,this.y);return this.x+" : <b>"+f+"</b>";}},plotOptions:{column:{cursor:"pointer",dataLabels:{enabled:true,formatter:function(){var f=checkValue(this.point.pretty_money,this.y);return f;},style:{fontWeight:"bold"}},color:"#d3e7ff",borderColor:"#609cdc",borderWidth:1,pointWidth:columnWidth(c),shadow:false,states:{hover:{color:"#609cdc"}}}},series:[{name:a,data:c}]});}function drawMultiYColumnChart(b,f,a,e,d,c){return new Highcharts.Chart({chart:{renderTo:b,height:250},credits:{enabled:false},title:{text:null},xAxis:[{categories:f,labels:{style:{fontWeight:"bold"}},lineColor:"#609cdc"}],yAxis:[{title:{text:d,style:{color:"rgb(128, 128, 128)",fontWeight:"bold"}},gridLineColor:"rgb(238,238,238)"},{title:{text:c,style:{color:"rgb(128, 128, 128)",fontWeight:"bold"}},gridLineColor:"rgb(238,238,238)",labels:{formatter:function(){return this.value+"%";}},opposite:true}],legend:{enabled:false},tooltip:{shared:true,borderColor:"#609cdc",formatter:function(){var g="<b>"+this.x+"</b><br>"+this.points[0].series.name+" : <b>"+checkValue(this.points[0].point.money_val,this.points[0].y)+"</b><br>";if(this.points[1]!=null){g+=this.points[1].series.name+" : <b>"+this.points[1].y+"</b>%";}return g;}},plotOptions:{column:{cursor:"pointer",dataLabels:{enabled:true,formatter:function(){var g=checkValue(this.point.pretty_money,this.y);return g;},style:{fontWeight:"bold"}},color:"#d3e7ff",borderColor:"#609cdc",borderWidth:1,pointWidth:columnWidth(a),shadow:false,states:{hover:{color:"#609cdc"}}},line:{lineWidth:2,shadow:false,color:"#ff9593"},},series:[{name:d,type:"column",data:a,yAxis:0},{name:c,type:"line",data:e,yAxis:1}]});}function columnChartdataLabelRotation(b){if(b.length>3){for(var a=0;a<b.length;a++){if(b[a].money_val!==undefined&&b[a].money_val.length>=8){return 270;}else{if(b[a].length>=8){return 270;}}}}return 0;}function columnWidth(a){if(a.length>3){return 30;}return 50;}
/*/assets/app/javascripts/advance-filter.js*/
(function(e){var a=function(){function g(j,l,i,m,h,k){if(!_.isUndefined(l)&&!_.isEmpty(l)){this.$form=j;this.conf=l;this.dataType=i;this.dateFmt=m;this.validators=h;this.s=e.extend(true,{},c(),k);this.b=new b(j,this.s,this);this.index=0;this.$c=e(this.$form.find(jq(this.s.filContinerId)));this.genConfigJson();this.eventBind();this.nofilterConf=false;}else{this.nofilterConf=true;}}e.extend(g.prototype,{eventBind:function(){var h=this;e(jq(this.s.filContinerId)).off();e(jq(this.s.filContinerId)).on("change",'[name^="filter[column]"]',function(i){h.columnChange(e(this));}).on("change",'[name^="filter[cond]"]',function(i){h.operatorChange(e(this));}).on("click",d(h.s.removeBtnKey,"remove"),function(i){e(this).parents(d(h.s.rowKey)).remove();h.handleRemoveBtn();});e(this.$form.find(d(this.s.addBtnKey,"add-button"))).off("click");e(this.$form.find(d(this.s.addBtnKey,"add-button"))).on("click",function(i){h.addRow();});formValidation.validators.local.filterDateFmt=this.filterCustomValidator();},validate:function(){try{var h=this.jsValidation();flashMessage.hide();var i=true;this.$form.find("[validate]").each(function(){if(!e.fn.validate.isValid(e(this),h.validators,h)){i=false;}});if(i){return true;}else{e("div[data-cb-flt-row]").removeAttr("style");e(".text-danger:visible").each(function(k,l){if(e(this).text().length>0){e(l).parent(".form-group").addClass("has-error");}});return false;}}catch(j){if(console&&console.log){console.log(j,j.stack);}return false;}},filterCustomValidator:function(){var h=this;return function(m,t){var i=e(m);var o=i.parents(d(h.s.rowKey));var s=o.find(d(h.s.grpTypeKey,"column")).find(d(h.s.inpTagKey,"input")).val();var j=o.find(d(h.s.grpTypeKey,"operator")).find(d(h.s.inpTagKey,"input")).val();var l=h.conf[s].dtype;var k=f(l);if(j==="between"||i.attr("name").indexOf("filter[to]")){var r=formValidation.validators.local.dateFormat(m,{message:t.formatMessage,format:k});if(!_.isUndefined(r)){return r;}var p=o.find('[name^="filter[from]"]');var q=null;if(p.val()!==""){q=Date.parseExact(p.val(),k);}var n=null;if(m.val()!==""){n=Date.parse(m.val(),k);}if(q!==null&&n!==null&&q.compareTo(n)>0){return t.rangeMessage;}}else{return formValidation.validators.local.dateFormat(m,{message:t.formatMessage,format:k});}};},addRow:function(){var h=this.genInputJson(this.colMap.value,this.condMap[this.colMap.value].value);this.index++;this.b.genRow(this.$c,this.colMap,this.condMap,h,this.conf,this.dataType,this.index);this.handleIndex();this.handleRemoveBtn();},columnChange:function(o){var h=o.parents(d(this.s.rowKey));var l=h.attr("index");var m=o.val();var k=this.condMap[m].value;var j=this.condMap[m];!_.isNull(j)?j.eventOrigin="column":void 0;var n=this.genInputJson(m,k);!_.isNull(n)?n.eventOrigin="column":void 0;this.b.genCol(h,this.b.handleName(j,l));this.b.genCol(h,this.b.handleName(n,l));},operatorChange:function(l){var n=l.parents(d(this.s.rowKey));var q=n.find(d(this.s.grpTypeKey,"column")).find(d(this.s.inpTagKey,"input")).val();var h=l.val();var j=this.dataType[this.conf[q].dtype];var k=null;for(var m=0;m<j.length;m++){if(j[m].cond===h){k=j[m];break;}}if(this.conf[q].hasOwnProperty("clvalues")){for(var o in this.conf[q].clvalues){if(this.conf[q].clvalues[o].val===h){k={cond:this.conf[q].clvalues[o].val,disp_name:this.conf[q].clvalues[o].dis_name};break;}}}if(_.isNull(k)){throw new Error("Sorry, no matching operator found");}if(!_.isUndefined(k.input)&&k.input===n.find(d(this.s.grpTypeKey,"input")).attr(d(this.s.inpTypeKey))){return;}var p=this.genInputJson(q,h);!_.isNull(p)?p.eventOrigin="operator":void 0;this.b.genCol(n,this.b.handleName(p,n.attr("index")));},handleRemoveBtn:function(){var h=this.$c.find(d(this.s.removeBtnKey,"remove"));if(h.length>1){e(h).removeAttr("disabled").removeClass("disabled");}else{e(h).attr("disabled","disabled").addClass("disabled");}},genFilter:function(){this.$c.empty();this.addRow();},reloadFilter:function(j){if(_.isUndefined(j)){throw new Error("Data need for reload is not present");}this.$c.empty();var n=e.extend(true,{},this.colMap);var m=e.extend(true,{},this.condMap);this.index=0;for(var l=0;l<j.length;l++){var h=j[l]["filter[column]"];n.value=h;var o=j[l]["filter[cond]"];m[h].value=o;var k=this.genInputJson(h,o);if(j[l].hasOwnProperty("filter[input][1]")){k.value=this.handleObjVal(j[l]["filter[input][1]"]);}if(j[l].hasOwnProperty("filter[input][2]")){k.value2=this.handleObjVal(j[l]["filter[input][2]"]);}this.index++;this.b.genRow(this.$c,n,m,k,this.conf,this.dataType,this.index);}this.handleIndex();this.handleRemoveBtn();},handleIndex:function(){var h=this.$form.find("#cb-fil-max-id");if(!_.isUndefined(h)){h.val(this.index);}},genConfigJson:function(){var j=[];this.condMap={};for(var l in this.conf){var i={id:l,text:this.conf[l].disp_name};this.handleGrpHeader(j,this.conf[l],i,"groupHeader");var n=this.dataType[this.conf[l].dtype],k=[];for(var p in n){var o={id:n[p].cond,text:n[p].disp_name};if(this.conf[l].hasOwnProperty("clvalues")){this.handleGrpHeader(k,n[p],o,"group_header");}else{if(!(n[p].restrict&&this.conf[l].restrict_fil_operators)){k.push(o);}}}if(this.conf[l].hasOwnProperty("clvalues")){var m=this.conf[l].clvalues;var q={text:"Relative",children:[]};for(var h=0;h<m.length;h++){if(!_.isObject(m[h])){continue;}q.children.push({id:m[h].val,text:m[h].dis_name});}k.push(q);}this.condMap[l]={list:true,elType:"select",dataType:"operator",name:this.s.fldName.cond,value:this.defaultVal(k),selectData:k};}this.colMap={list:true,elType:"select",dataType:"column",name:this.s.fldName.column,value:this.defaultVal(j),selectData:j};},genInputJson:function(k,q){var r=this.conf[k].dtype;var m=this.dataType[r];var n=null;for(var p in m){if(m[p].cond===q){n=m[p];break;}}if(this.conf[k].hasOwnProperty("clvalues")){for(var p in this.conf[k].clvalues){if(this.conf[k].clvalues[p].val===q){n={cond:this.conf[k].clvalues[p].val,disp_name:this.conf[k].clvalues[p].dis_name};break;}}}if(_.isNull(n)){throw new Error("Sorry, no data type defn found corresponding to current column and condition.");}if(_.isUndefined(n.input)){return null;}var h={dataType:"input"};if(q==="between"){h.name=this.s.fldName.dtFrom;h.name2=this.s.fldName.dtTo;h.dataType2="input";h.elType2="input";}else{h.name=this.s.fldName.input;}if(_.indexOf(this.s.inputGrp.list,r)!==-1){h.elType="select";if(!_.isUndefined(this.conf[k].autocomplete)&&this.conf[k].autocomplete){h.autcomplete=true;h.placeholder=this.conf[k].placeHolder;h.target=this.conf[k].target;}else{h.selectData=new Array();var j=this.conf[k].lvalues;for(var l=0;l<j.length;l++){h.selectData.push({id:j[l].val,text:j[l].dis_name});}}}else{h.elType="input";}h[n.input]=true;h.dateFmt=f(r);h.operatorGrp=r;return h;},jsValidation:function(){var l=e.extend(true,{},this.validators);var t=this.$form.find(d(this.s.grpTypeKey,"column"));var s={};for(var o=0;o<t.length;o++){var r=e(t[o]).find(d(this.s.inpTagKey,"input")).val();var h=this.conf[r];var u=h.dtype;var k=l.validators[r];if(_.has(k,"email")){delete k.email;}var q=e(t[o]).parents(d(this.s.rowKey));var p=q.find(d(this.s.grpTypeKey,"input"));for(var n=0;n<p.length;n++){var m=e(p[n]).find(d(this.s.inpTagKey,"input")).attr("name");s[m]=k;}}l.validators=s;return l;},getGroup:function(h,j){if(_.isUndefined(h)||!_.isArray(h)){return null;}for(var k=0;k<h.length;k++){if(!h[k].hasOwnProperty("text")||!h[k].hasOwnProperty("children")){continue;}if(h[k].text===j){return h[k];}}return null;},handleGrpHeader:function(j,l,i,k){if(l.hasOwnProperty(k)){var h=this.getGroup(j,l[k]);if(_.isNull(h)||!_.isObject(h)){h={text:l[k],children:new Array(i)};j.push(h);}else{h.children.push(i);}}else{j.push(i);}},defaultVal:function(h){var i=h[0];if(i.hasOwnProperty("children")){return i.children[0].id;}return i.id;},handleObjVal:function(h){if(_.isObject(h)||_.isArray(h)){return JSON.stringify(h);}return h;}});return g;}();var b=function(){var i="data-cb-select",h="data-cb-remote-target";function g(j,k,l){this.f=l;this.$form=j;this.s=k;this.init();}e.extend(g.prototype,{init:function(){this.$template=e(jq(this.s.templateId));this.$rowTemplate=this.$template.find(d(this.s.rowKey));this.$elTemplate=this.$template.find(d(this.s.elemKey));},genRow:function(k,j,l,q,o,p,n){var r=Mustache.render(this.$rowTemplate.html(),{index:n});e(r).hide();k.append(e(r));var m=k.find("["+this.s.rowKey+'="row'+n+'"]');this.genCol(m,this.handleName(j,n));this.genCol(m,this.handleName(l[j.value],n));this.genCol(m,this.handleName(q,n));if(k.find(d(this.s.rowKey)).length>1){m.slideDown(200);}else{m.show();}return r;},genCol:function(p,o){if(this.verfiyData(p,o)){return;}var m=Mustache.render(this.$elTemplate.html(),o);p.append(e(m));var j=p.find(d(this.s.grpTypeKey,o.dataType));var t=j.find("input");if(o.hasOwnProperty("dataType")&&o.dataType==="column"){t.removeClass("cb-width--sm").addClass("cb-width--md");}var r=j.attr(this.s.inpTypeKey);if(o.dataType==="input"){t.attr("validate",true);}if(o.elType==="select"){if(o.hasOwnProperty("autcomplete")){t.attr(i,r==="multi_select"?"multiselect":"list");t.attr(h,o.target);t.cbSelect2Bind();}else{if(o.hasOwnProperty("selectData")){if(o.dataType==="input"){var k=t.val();if(k!==""){var u=k;try{u=e.parseJSON(k);}catch(q){u=k;}var s="";if(_.isArray(u)){for(var n=0;n<u.length;n++){s=s+u[n];if(n!==u.length-1){s=s+",";}}}else{s=u;}t.val(s);}}var l={data:o.selectData};if(r==="multi_select"){l.multiple=true;t.attr(i,"multiselect");}if(o.hasOwnProperty("dataType")&&o.dataType==="column"){l.formatSelection=this.formatSelection();}if(o.dataType==="column"){this.unescapeCol(l);}else{if(o.dataType==="input"){this.unescape(l.data);}}t.select2(l);}}}else{if(_.indexOf(this.s.datepickerFld,r)!==-1){this.addDatepicker(t,o);}}return j;},unescapeCol:function(j){for(var k in j.data){for(var l in j.data[k]){if(l==="children"){this.unescape(j.data[k][l]);}}}},unescape:function(k){for(var j=0;j<k.length;j++){k[j].text=_.unescape(k[j].text);}},formatSelection:function(){var j=this;return function(n,k){if(_.isUndefined(j.f.colMap)){return n.text;}var l=n.text;var p=j.f.colMap.selectData;for(var o in p){if(!p[o].hasOwnProperty("children")){break;}for(var m in p[o].children){if(p[o].children[m].id===n.id){l=p[o].text+" : "+_.escape(n.text);break;}}}return l;};},handleName:function(k,j){if(_.isUndefined(k)||_.isNull(k)){return;}if(!k.hasOwnProperty("name")){throw new Error("Name should be present");}var l=e.extend(true,{},k);l.name=l.name+"["+j+"]";l.errorId=l.name+".err";if(k.hasOwnProperty("between")){l.name2=l.name2+"["+j+"]";l.errorId2=l.name2+".err";}return l;},verfiyData:function(j,m){if(_.isUndefined(m)||_.isNull(m)){var k=j.find(d(this.s.grpTypeKey,"input"));if(k.length>0){k.remove();}return true;}else{var k=j.find(d(this.s.grpTypeKey,m.dataType));var l=k.attr(this.s.inpTypeKey);if(m.hasOwnProperty("eventOrigin")&&m.eventOrigin==="operator"&&m.dataType==="input"&&!_.isUndefined(l)&&m.hasOwnProperty(l)&&m[l]){return true;}else{if(k.length>0){k.remove();}if(!m.hasOwnProperty("placeholder")&&m.elType==="select"){m.placeholder=this.s.placeholder;}return false;}}},addDatepicker:function(k,j){if(!j.hasOwnProperty("operatorGrp")){return;}if(j.operatorGrp==="dt_date"||j.operatorGrp==="dt_date_notnull"){k.datepicker({dateFormat:"yy-mm-dd"});}else{k.datetimepicker({controlType:"spinner",showSecond:true,dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss",useLocalTimezone:false,defaultTimezone:"+0000"});}k.parent(".form-group").find(".cb-icon-new-input-calendar").on("click",function(){e(this).prev("input").datepicker("show");});if(!_.isUndefined(j.value)||!_.isUndefined(j.value2)){if(k.length>1){e(k[0]).datepicker("setDate",Date.parseExact(j.value,j.dateFmt));e(k[1]).datepicker("setDate",Date.parseExact(j.value2,j.dateFmt));}else{k.datepicker("setDate",Date.parseExact(j.value,j.dateFmt));}}}});return g;}();var c=function(){return{filContinerId:"cb-filter-item-container",templateId:"cb-filter-template",rowKey:"data-cb-flt-row",elemKey:"data-cb-flt-element-temp",removeBtnKey:"data-cb-flt-remove-btn",addBtnKey:"data-cb-flt-add-btn",grpTypeKey:"data-cb-flt-grp-type",inpTypeKey:"data-cb-flt-input-type",inpTagKey:"data-cb-flt-tag",dateFmt:"yyyy-MM-dd",extraParamCallBack:null,validate:true,placeholder:"Select some option",fldName:{column:"filter[column]",cond:"filter[cond]",dtFrom:"filter[from]",dtTo:"filter[to]",input:"filter[input]"},datepickerFld:["between","after","before"],inputGrp:{date:["dt_date","dt_date_time","dt_date_notnull","dt_date_time_notnull"],list:["dt_list","dt_list_notnull","dt_mul_sel","dt_mul_sel_nullable","dt_mul","dt_mul_notnull"]}};};var f=function(g){if(g==="dt_date_time"||g==="dt_date_time_notnull"){return"yyyy-MM-dd HH:mm:ss";}else{return"yyyy-MM-dd";}};var d=function(g,h){if(_.isUndefined(h)){return"["+g+"]";}else{return"["+g+'="'+h+'"]';}};e.fn.AdvanceFilter=function(j,h,l,g,i){var k=_.isUndefined(i)?{}:i;e(this).data("AdvanceFilter",new a(e(this),j,h,l,g,k));return e(this).data("AdvanceFilter");};})(window.jQuery);